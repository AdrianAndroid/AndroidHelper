<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <style type="text/css">

#watermark {

  position: relative;
  overflow: hidden;
}

#watermark .x {
  position: absolute;
  top: 800;
  left: 400;
  color: #3300ff;
  font-size: 50px;
  pointer-events: none;
  opacity:0.3;
  filter:Alpha(opacity=50);
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
}
    </style>


    <style type="text/css">
 html{color:#333;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility;font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-variant:normal}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.typo a{border-bottom:1px solid #1abc9c}.typo a:hover{border-bottom-color:#555;color:#555}.typo a:hover,a,ins{text-decoration:none}.typo-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,Courier New,monospace}pre{background:hsla(0,0%,97%,.7);border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.typo-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.typo-dl,.typo-form,.typo-hr,.typo-ol,.typo-p,.typo-pre,.typo-table,.typo-ul,.typo dl,.typo form,.typo hr,.typo ol,.typo p,.typo pre,.typo table,.typo ul,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;line-height:1.35}.typo-h1,.typo-h2,.typo-h3,.typo-h4,.typo-h5,.typo-h6,.typo h1,.typo h2,.typo h3,.typo h4,.typo h5,.typo h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.typo-h1,.typo h1{font-size:2em}.typo-h2,.typo h2{font-size:1.8em}.typo-h3,.typo h3{font-size:1.6em}.typo-h4,.typo h4{font-size:1.4em}.typo-h5,.typo-h6,.typo h5,.typo h6{font-size:1.2em}.typo-ul,.typo ul{margin-left:1.3em;list-style:disc}.typo-ol,.typo ol{list-style:decimal;margin-left:1.9em}.typo-ol ol,.typo-ol ul,.typo-ul ol,.typo-ul ul,.typo li ol,.typo li ul{margin-bottom:.8em;margin-left:2em}.typo-ol ul,.typo-ul ul,.typo li ul{list-style:circle}.typo-table td,.typo-table th,.typo table caption,.typo table td,.typo table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.typo-table th,.typo table th{background:#fbfbfb}.typo-table thead th,.typo table thead th{background:hsla(0,0%,95%,.7)}.typo table caption{border-bottom:none}.typo-input,.typo-textarea{-webkit-appearance:none;border-radius:0}.typo-em,.typo em,caption,legend{color:#000;font-weight:inherit}.typo-em{position:relative}.typo-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"}.typo img{max-width:100%}.common-content{font-weight:400;color:#353535;line-height:1.75rem;white-space:normal;word-break:normal;font-size:1rem}.common-content img{display:block;max-width:100%;background-color:#eee}.common-content audio,.common-content video{width:100%;background-color:#eee}.common-content center,.common-content font{margin-top:1rem;display:inline-block}.common-content center{width:100%}.common-content pre{margin-top:1rem;padding-left:0;padding-right:0;position:relative;overflow:hidden}.common-content pre code{font-size:.8rem;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;width:100%;box-sizing:border-box;padding-left:1rem;padding-right:1rem;overflow-x:auto}.common-content hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}.common-content b,.common-content h1,.common-content h2,.common-content h3,.common-content h4,.common-content h5,.common-content strong{font-weight:700}.common-content h1,.common-content h2{font-size:1.125rem;margin-bottom:.45rem}.common-content h3,.common-content h4,.common-content h5{font-size:1rem;margin-bottom:.45rem}.common-content p{font-weight:400;color:#353535;margin-top:.15rem}.common-content .orange{color:#ff5a05}.common-content .reference{font-size:1rem;color:#888}.custom-rich-content h1{margin-top:0;font-weight:400;font-size:15.25px;border-bottom:1px solid #eee;line-height:2.8}.custom-rich-content li,.custom-rich-content p{font-size:14px;color:#888;line-height:1.6}table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}table.hljs-ln,table.hljs-ln tbody,table.hljs-ln td,table.hljs-ln tr{box-sizing:border-box}table.hljs-ln td{padding:0;border:0}table.hljs-ln td.hljs-ln-numbers{min-width:15px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;user-select:none}table.hljs-ln td.hljs-ln-code,table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;line-height:20px;vertical-align:top}table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;color:#24292e;word-wrap:normal;white-space:pre}video::-webkit-media-controls{overflow:hidden!important}video::-webkit-media-controls-enclosure{width:calc(100% + 32px);margin-left:auto}.button-cancel{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel,.button-primary{-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary{color:#fff;background-color:#ff5a05;border-radius:3px}@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot);src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.woff) format("woff"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.ttf) format("truetype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.svg#iconfont) format("svg")}@font-face{font-family:player-font;src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot);src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.woff) format("woff"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.ttf) format("truetype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.svg#player-font) format("svg")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}html{background:#fff;min-height:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{width:100%}body.fixed{overflow:hidden;position:fixed;width:100vw;height:100vh}i{font-style:normal}a{word-wrap:break-word;-webkit-tap-highlight-color:rgba(0,0,0,0)}a:hover{text-decoration:none}.fade-enter-active,.fade-leave-active{transition:opacity .3s}.fade-enter,.fade-leave-to{opacity:0}.MathJax,.MathJax_CHTML,.MathJax_MathContainer,.MathJax_MathML,.MathJax_PHTML,.MathJax_PlainSource,.MathJax_SVG{outline:0}.ios-app-switch .js-audit{display:none}._loading_wrap_{position:fixed;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}._loading_div_class_,._loading_wrap_{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}._loading_div_class_{word-wrap:break-word;padding:.5rem .75rem;text-align:center;z-index:9999;font-size:.6rem;max-width:60%;color:#fff;border-radius:.25rem;-ms-flex-direction:column;flex-direction:column}._loading_div_class_ .message{color:#353535;font-size:16px;line-height:3}.spinner{animation:circle-rotator 1.4s linear infinite}.spinner *{line-height:0;box-sizing:border-box}@keyframes circle-rotator{0%{transform:rotate(0deg)}to{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:circle-dash 1.4s ease-in-out infinite,circle-colors 5.6s ease-in-out infinite}@keyframes circle-colors{0%{stroke:#ff5a05}to{stroke:#ff5a05}}@keyframes circle-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.confirm-box-wrapper,.confirm-box-wrapper .mask{position:absolute;top:0;left:0;right:0;bottom:0}.confirm-box-wrapper .mask{background:rgba(0,0,0,.6)}.confirm-box-wrapper .confirm-box{position:fixed;top:50%;left:50%;width:267px;background:#fff;transform:translate(-50%,-50%);border-radius:7px}.confirm-box-wrapper .confirm-box .head{margin:0 18px;font-size:18px;text-align:center;line-height:65px;border-bottom:1px solid #d9d9d9}.confirm-box-wrapper .confirm-box .body{padding:18px;padding-bottom:0;color:#353535;font-size:12.5px;max-height:150px;overflow:auto}.confirm-box-wrapper .confirm-box .foot{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:18px}.confirm-box-wrapper .confirm-box .foot .button-cancel{border:1px solid #d9d9d9}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}




    </style>
    <style type="text/css">
        .button-cancel[data-v-87ffcada]{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel[data-v-87ffcada],.button-primary[data-v-87ffcada]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary[data-v-87ffcada]{color:#fff;background-color:#ff5a05;border-radius:3px}.pd[data-v-87ffcada]{padding-left:1.375rem;padding-right:1.375rem}.article[data-v-87ffcada]{max-width:70rem;margin:0 auto}.article .article-unavailable[data-v-87ffcada]{color:#fa8919;font-size:15px;font-weight:600;line-height:24px;border-radius:5px;padding:12px;background-color:#f6f7fb;margin-top:20px}.article .article-unavailable .iconfont[data-v-87ffcada]{font-size:12px}.article .main[data-v-87ffcada]{padding:1.25rem 0;margin-bottom:52px}.article-title[data-v-87ffcada]{color:#353535;font-weight:400;line-height:1.65rem;font-size:1.34375rem}.article-info[data-v-87ffcada]{color:#888;font-size:.9375rem;margin-top:1.0625rem}.article-content[data-v-87ffcada]{margin-top:1.0625rem}.article-content.android video[data-v-87ffcada]::-webkit-media-controls-fullscreen-button{display:none}.copyright[data-v-87ffcada]{color:#b2b2b2;padding-bottom:20px;margin-top:20px;font-size:13px}.audio-player[data-v-87ffcada]{width:100%;margin:20px 0}.to-comment[data-v-87ffcada]{overflow:hidden;padding-top:10px;margin-bottom:-30px}.to-comment a.button-primary[data-v-87ffcada]{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}.article-comments[data-v-87ffcada]{margin-top:2rem}.article-comments h2[data-v-87ffcada]{text-align:center;color:#888;position:relative;z-index:1;margin-bottom:1rem}.article-comments h2[data-v-87ffcada]:before{border-top:1px dotted #888;content:"";position:absolute;top:56%;left:0;width:100%;z-index:-1}.article-comments h2 span[data-v-87ffcada]{font-size:15.25px;font-weight:400;padding:0 1rem;background:#fff;display:inline-block}.article-sub-bottom[data-v-87ffcada]{z-index:10;cursor:pointer}.switch-btns[data-v-87ffcada]{height:76px;cursor:pointer;padding-top:24px;padding-bottom:24px;border-bottom:10px solid #f6f7fb;position:relative}.switch-btns[data-v-87ffcada]:before{content:" ";height:1px;background:#e8e8e8;position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:1.375rem;right:1.375rem}.switch-btns .btn[data-v-87ffcada]{height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.switch-btns .btn .tag[data-v-87ffcada]{-webkit-box-flex:0;-ms-flex:0 0 62px;flex:0 0 62px;text-align:center;color:#888;font-size:14px;border-radius:10px;height:22px;line-height:22px;background:#f6f7fb;font-weight:400}.switch-btns .btn .txt[data-v-87ffcada]{margin-left:10px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#888;font-size:15px;height:22px;line-height:22px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400}@media (max-width:769px){.article .breadcrumb[data-v-87ffcada]{padding-top:10px;padding-bottom:10px}}





    </style>

    <style type="text/css">
        .comment-item{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:1rem}.comment-item a{border-bottom:none}.comment-item .avatar{width:2.625rem;height:2.625rem;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.comment-item .info{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.comment-item .info .hd{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .username{color:#888;font-size:15.25px;font-weight:400;line-height:1.2}.comment-item .info .hd .control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .control .btn-share{color:#888;font-size:.75rem;margin-right:1rem}.comment-item .info .hd .control .btn-praise{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.comment-item .info .hd .control .btn-praise i{color:#888;display:inline-block;font-size:.75rem;margin-right:.3rem;margin-top:-.01rem}.comment-item .info .hd .control .btn-praise i.on,.comment-item .info .hd .control .btn-praise span{color:#ff5a05}.comment-item .info .bd{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6}.comment-item .info .time{color:#888;font-size:9px;line-height:1}.comment-item .info .reply .reply-hd{font-size:15.25px}.comment-item .info .reply .reply-hd span{margin-left:-12px;color:#888;font-weight:400}.comment-item .info .reply .reply-hd i{color:#ff5a05;font-size:15.25px}.comment-item .info .reply .reply-content{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all}.comment-item .info .reply .reply-time{color:#888;font-size:9px}




    </style>
</head>
<body>
<div id="app">


    <div data-v-87ffcada="" class="article" id="watermark">
        <p class="x">æ›´å¤šè¯¾ç¨‹è¯·åŠ QQ1046877154ï¼Œå¾®ä¿¡loveu_110è·å–</p>
        <div data-v-87ffcada="" class="main main-app">
            <h1 data-v-87ffcada="" class="article-title pd">
                06è®²å¡é¡¿ä¼˜åŒ–ï¼ˆä¸‹ï¼‰ï¼šå¦‚ä½•ç›‘æ§åº”ç”¨å¡é¡¿
            </h1>
            <div data-v-87ffcada="" class="article-content typo common-content pd"><img data-v-87ffcada=""
                                                                                        src="https://static001.geekbang.org/resource/image/dd/ea/ddd2e3b5cf52a07411d4cce6fb1f02ea.jpg">


                <div data-v-87ffcada="" id="article-content" class="">
                    <div class="text">
                        <p>â€œæˆ‘åœ¨ç§’æ€iPhone XSçš„æ”¯ä»˜é¡µé¢å¡äº†3ç§’ï¼Œæœ€åæ²¡æŠ¢åˆ°â€ï¼Œç”¨æˆ·å˜¶å£°åŠ›ç«­åœ°åé¦ˆäº†ä¸€ä¸ªå¡é¡¿é—®é¢˜ã€‚</p><p>â€œè«æ…Œè«æ…Œâ€ï¼Œç­‰æˆ‘æ‰“å¼€Android Studioï¼Œ ç”¨ä¸Šä¸€è®²å­¦åˆ°çš„å‡ ä¸ªå·¥å…·åˆ†æä¸€ä¸‹å°±çŸ¥é“åŸå› äº†ã€‚</p><p>â€œå’¦ï¼Œåœ¨æˆ‘è¿™é‡Œæ•´ä¸ªæ”¯ä»˜è¿‡ç¨‹ä¸æ»‘èˆ¬æµç•…â€ã€‚è¿™ä¸ªç»å†è®©æˆ‘æ˜ç™½ï¼Œå¡é¡¿è·Ÿå´©æºƒä¸€æ ·éœ€è¦â€œç°åœºä¿¡æ¯â€ã€‚å› ä¸ºå¡é¡¿çš„äº§ç”Ÿä¹Ÿæ˜¯ä¾èµ–å¾ˆå¤šå› ç´ ï¼Œæ¯”å¦‚ç”¨æˆ·çš„ç³»ç»Ÿç‰ˆæœ¬ã€CPUè´Ÿè½½ã€ç½‘ç»œç¯å¢ƒã€åº”ç”¨æ•°æ®ç­‰ã€‚</p><p>è„±ç¦»è¿™ä¸ªç°åœºï¼Œæˆ‘ä»¬æœ¬åœ°éš¾ä»¥å¤ç°ï¼Œä¹Ÿå°±å¾ˆéš¾å»è§£å†³é—®é¢˜ã€‚ä½†æ˜¯å¡é¡¿åˆéå¸¸å½±å“ç”¨æˆ·ä½“éªŒçš„ï¼Œç‰¹åˆ«æ˜¯å‘ç”Ÿåœ¨å¯åŠ¨ã€èŠå¤©ã€æ”¯ä»˜è¿™äº›å…³é”®åœºæ™¯ï¼Œé‚£æˆ‘ä»¬åº”è¯¥å¦‚ä½•å»ç›‘æ§çº¿ä¸Šçš„å¡é¡¿é—®é¢˜ï¼Œå¹¶ä¸”ä¿ç•™è¶³å¤Ÿå¤šçš„ç°åœºä¿¡æ¯ååŠ©æˆ‘ä»¬æ’æŸ¥è§£å†³é—®é¢˜å‘¢ï¼Ÿ</p><h2>å¡é¡¿ç›‘æ§</h2><p>å‰é¢æˆ‘è®²è¿‡ç›‘æ§ANRçš„æ–¹æ³•ï¼Œä¸è¿‡ä¹Ÿæåˆ°ä¸¤ä¸ªé—®é¢˜ï¼šä¸€ä¸ªæ˜¯é«˜ç‰ˆæœ¬çš„ç³»ç»Ÿæ²¡æœ‰æƒé™è¯»å–ç³»ç»Ÿçš„ANRæ—¥å¿—ï¼›å¦ä¸€ä¸ªæ˜¯ANRå¤ªä¾èµ–ç³»ç»Ÿå®ç°ï¼Œæˆ‘ä»¬æ— æ³•çµæ´»æ§åˆ¶å‚æ•°ï¼Œä¾‹å¦‚æˆ‘è§‰å¾—ä¸»çº¿ç¨‹å¡é¡¿3ç§’ç”¨æˆ·å·²ç»ä¸å¤ªèƒ½å¿å—ï¼Œè€Œé»˜è®¤å‚æ•°åªèƒ½ç›‘æ§è‡³å°‘5ç§’ä»¥ä¸Šçš„å¡é¡¿ã€‚</p><p>æ‰€ä»¥ç°å®æƒ…å†µå°±è¦æ±‚æˆ‘ä»¬éœ€è¦é‡‡ç”¨å…¶ä»–çš„æ–¹å¼æ¥ç›‘æ§æ˜¯å¦å‡ºç°å¡é¡¿é—®é¢˜ï¼Œå¹¶ä¸”é’ˆå¯¹ç‰¹å®šåœºæ™¯è¿˜è¦ç›‘æ§å…¶ä»–ç‰¹å®šçš„æŒ‡æ ‡ã€‚</p><p><strong>1. æ¶ˆæ¯é˜Ÿåˆ—</strong></p><p>æˆ‘è®¾è®¡çš„ç¬¬ä¸€å¥—ç›‘æ§å¡é¡¿çš„æ–¹æ¡ˆæ˜¯<strong>åŸºäºæ¶ˆæ¯é˜Ÿåˆ—å®ç°</strong>ï¼Œé€šè¿‡æ›¿æ¢Looperçš„Printerå®ç°ã€‚åœ¨2013å¹´çš„æ—¶å€™ï¼Œæˆ‘å†™è¿‡ä¸€ä¸ªåä¸ºWxPerformanceToolçš„æ€§èƒ½ç›‘æ§å·¥å…·ï¼Œå…¶ä¸­è€—æ—¶ç›‘æ§å°±ä½¿ç”¨äº†è¿™ä¸ªæ–¹æ³•ã€‚åé¢è¿™ä¸ªå·¥å…·åœ¨è…¾è®¯å…¬å…±ç»„ä»¶åšäº†å†…éƒ¨å¼€æºï¼Œè¿˜è·å¾—äº†2013å¹´çš„å¹´åº¦åä½³ç»„ä»¶ã€‚</p><!-- [[[read_end]]] --><p><img src="https://static001.geekbang.org/resource/image/10/b3/10a39c4253447b3e9d0a5045795d47b3.png" alt=""></p><p>è¿˜æ²¡åº†ç¥å®Œï¼Œå¾ˆå¿«å°±æœ‰åŒäº‹è·Ÿæˆ‘åæ§½ä¸€ä¸ªé—®é¢˜ï¼šçº¿ä¸Šå¼€å¯äº†è¿™ä¸ªç›‘æ§æ¨¡å—ï¼Œå¿«é€Ÿæ»‘åŠ¨æ—¶å¹³å‡å¸§ç‡èµ·ç é™ä½5å¸§ã€‚æˆ‘é€šè¿‡Traceviewä¸€çœ‹ï¼Œå‘ç°æ˜¯å› ä¸ºä¸Šé¢å›¾ä¸­æ‰€ç¤ºçš„å¤§é‡å­—ç¬¦ä¸²æ‹¼æ¥å¯¼è‡´æ€§èƒ½æŸè€—ä¸¥é‡ã€‚</p><p>åæ¥å¾ˆå¿«åˆæƒ³åˆ°äº†å¦å¤–ä¸€ä¸ªæ–¹æ¡ˆï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªç›‘æ§çº¿ç¨‹ï¼Œæ¯éš”1ç§’å‘ä¸»çº¿ç¨‹æ¶ˆæ¯é˜Ÿåˆ—çš„å¤´éƒ¨æ’å…¥ä¸€æ¡ç©ºæ¶ˆæ¯ã€‚å‡è®¾1ç§’åè¿™ä¸ªæ¶ˆæ¯å¹¶æ²¡æœ‰è¢«ä¸»çº¿ç¨‹æ¶ˆè´¹æ‰ï¼Œè¯´æ˜é˜»å¡æ¶ˆæ¯è¿è¡Œçš„æ—¶é—´åœ¨0ï½1ç§’ä¹‹é—´ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ç›‘æ§3ç§’å¡é¡¿ï¼Œé‚£åœ¨ç¬¬4æ¬¡è½®è¯¢ä¸­å¤´éƒ¨æ¶ˆæ¯ä¾ç„¶æ²¡æœ‰è¢«æ¶ˆè´¹çš„è¯ï¼Œå°±å¯ä»¥ç¡®å®šä¸»çº¿ç¨‹å‡ºç°äº†ä¸€æ¬¡3ç§’ä»¥ä¸Šçš„å¡é¡¿ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/b0/56/b06d5aa439e8bb75885a338df9a25f56.png" alt=""></p><p>è¿™ä¸ªæ–¹æ¡ˆä¹Ÿå­˜åœ¨ä¸€å®šçš„è¯¯å·®ï¼Œé‚£å°±æ˜¯å‘é€ç©ºæ¶ˆæ¯çš„é—´éš”æ—¶é—´ã€‚ä½†è¿™ä¸ªé—´éš”æ—¶é—´ä¹Ÿä¸èƒ½å¤ªå°ï¼Œå› ä¸ºç›‘æ§çº¿ç¨‹å’Œä¸»çº¿ç¨‹å¤„ç†ç©ºæ¶ˆæ¯éƒ½ä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½æŸè€—ï¼Œä½†åŸºæœ¬å½±å“ä¸å¤§ã€‚</p><p><strong>2. æ’æ¡©</strong></p><p>ä¸è¿‡åœ¨ä½¿ç”¨äº†ä¸€æ®µæ—¶é—´ä¹‹åï¼Œæˆ‘æ„Ÿè§‰è¿˜æ˜¯æœ‰é‚£ä¹ˆä¸€ç‚¹ä¸çˆ½ã€‚åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„å¡é¡¿ç›‘æ§å¹¶ä¸å‡†ç¡®ï¼Œæ­£åœ¨è¿è¡Œçš„å‡½æ•°æœ‰å¯èƒ½å¹¶ä¸æ˜¯çœŸæ­£è€—æ—¶çš„å‡½æ•°ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æˆ‘ç”»å¼ å›¾è§£é‡Šèµ·æ¥å°±æ¸…æ¥šäº†ã€‚æˆ‘ä»¬å‡è®¾ä¸€ä¸ªæ¶ˆæ¯å¾ªç¯é‡Œé¢é¡ºåºæ‰§è¡Œäº†Aã€Bã€Cä¸‰ä¸ªå‡½æ•°ï¼Œå½“æ•´ä¸ªæ¶ˆæ¯æ‰§è¡Œè¶…è¿‡3ç§’æ—¶ï¼Œå› ä¸ºå‡½æ•°Aå’ŒBå·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œæˆ‘ä»¬åªèƒ½å¾—åˆ°çš„æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°Cçš„å †æ ˆï¼Œäº‹å®ä¸Šå®ƒå¯èƒ½å¹¶ä¸è€—æ—¶ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/8e/bf/8ee841e21f4a40f2835fe846be143dbf.png" alt=""></p><p><strong>ä¸è¿‡å¯¹äºçº¿ä¸Šå¤§æ•°æ®æ¥è¯´ï¼Œå› ä¸ºå‡½æ•°Aå’ŒBç›¸å¯¹æ¯”è¾ƒè€—æ—¶ï¼Œæ‰€ä»¥æŠ“å–åˆ°å®ƒä»¬çš„æ¦‚ç‡ä¼šæ›´å¤§ä¸€äº›ï¼Œé€šè¿‡åå°èšåˆåæ•è·åˆ°å‡½æ•°Aå’ŒBçš„å¡é¡¿æ—¥å¿—ä¼šæ›´å¤šä¸€äº›ã€‚</strong></p><p>è¿™ä¹Ÿæ˜¯æˆ‘ä»¬çº¿ä¸Šç›®å‰ä¾ç„¶ä½¿ç”¨åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„æ–¹æ³•ï¼Œä½†æ˜¯è‚¯å®šå¸Œæœ›å¯ä»¥åšåˆ°è·ŸTraceviewä¸€æ ·ï¼Œå¯ä»¥æ‹¿åˆ°æ•´ä¸ªå¡é¡¿è¿‡ç¨‹æ‰€æœ‰è¿è¡Œå‡½æ•°çš„è€—æ—¶ï¼Œå°±åƒä¸‹é¢å›¾ä¸­çš„ç»“æœï¼Œå¯ä»¥æ˜ç¡®çŸ¥é“å…¶å®å‡½æ•°Aå’ŒBæ‰æ˜¯é€ æˆå¡é¡¿çš„ä¸»è¦åŸå› ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/0c/b5/0c6d97f12e0a5342626b11d683c227b5.png" alt=""></p><p>æ—¢ç„¶è¿™æ ·ï¼Œé‚£æˆ‘ä»¬èƒ½å¦ç›´æ¥åˆ©ç”¨Android Runtimeå‡½æ•°è°ƒç”¨çš„å›è°ƒäº‹ä»¶ï¼Œåšä¸€ä¸ªè‡ªå®šä¹‰çš„Traceview++å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯éœ€è¦ä½¿ç”¨Inline HookæŠ€æœ¯ã€‚æˆ‘ä»¬å¯ä»¥å®ç°ç±»ä¼¼Nanoscopeå…ˆå†™å†…å­˜çš„æ–¹æ¡ˆï¼Œä½†è€ƒè™‘åˆ°å…¼å®¹æ€§é—®é¢˜ï¼Œè¿™å¥—æ–¹æ¡ˆå¹¶æ²¡æœ‰ç”¨åˆ°çº¿ä¸Šã€‚</p><p>å¯¹äºå¤§ä½“é‡çš„åº”ç”¨ï¼Œç¨³å®šæ€§æ˜¯ç¬¬ä¸€è€ƒè™‘å› ç´ ã€‚é‚£å¦‚æœåœ¨ç¼–è¯‘è¿‡ç¨‹æ’æ¡©ï¼Œå…¼å®¹æ€§é—®é¢˜è‚¯å®šæ˜¯OKçš„ã€‚ä¸Šä¸€è®²è®²åˆ°systraceå¯ä»¥é€šè¿‡æ’æ¡©è‡ªåŠ¨ç”ŸæˆTrace Tagï¼Œæˆ‘ä»¬ä¸€æ ·ä¹Ÿå¯ä»¥åœ¨å‡½æ•°å…¥å£å’Œå‡ºå£åŠ å…¥è€—æ—¶ç›‘æ§çš„ä»£ç ï¼Œä½†æ˜¯éœ€è¦è€ƒè™‘çš„ç»†èŠ‚æœ‰å¾ˆå¤šã€‚</p><ul>
<li>
<p><strong>é¿å…æ–¹æ³•æ•°æš´å¢</strong>ã€‚åœ¨å‡½æ•°çš„å…¥å£å’Œå‡ºå£åº”è¯¥æ’å…¥ç›¸åŒçš„å‡½æ•°ï¼Œåœ¨ç¼–è¯‘æ—¶æå‰ç»™ä»£ç ä¸­æ¯ä¸ªæ–¹æ³•åˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„IDä½œä¸ºå‚æ•°ã€‚</p>
</li>
<li>
<p><strong>è¿‡æ»¤ç®€å•çš„å‡½æ•°</strong>ã€‚è¿‡æ»¤ä¸€äº›ç±»ä¼¼ç›´æ¥returnã€i++è¿™æ ·çš„ç®€å•å‡½æ•°ï¼Œå¹¶ä¸”æ”¯æŒé»‘åå•é…ç½®ã€‚å¯¹ä¸€äº›è°ƒç”¨éå¸¸é¢‘ç¹çš„å‡½æ•°ï¼Œéœ€è¦æ·»åŠ åˆ°é»‘åå•ä¸­æ¥é™ä½æ•´ä¸ªæ–¹æ¡ˆå¯¹æ€§èƒ½çš„æŸè€—ã€‚</p>
</li>
</ul><p><img src="https://static001.geekbang.org/resource/image/55/aa/5554d062dd45d6d927a08be4a39926aa.png" alt=""></p><p>åŸºäºæ€§èƒ½çš„è€ƒè™‘ï¼Œçº¿ä¸Šåªä¼šç›‘æ§ä¸»çº¿ç¨‹çš„è€—æ—¶ã€‚å¾®ä¿¡çš„Matrixä½¿ç”¨çš„å°±æ˜¯è¿™ä¸ªæ–¹æ¡ˆï¼Œå› ä¸ºåšäº†å¤§é‡çš„ä¼˜åŒ–ï¼Œæ‰€ä»¥æœ€ç»ˆå®‰è£…åŒ…ä½“ç§¯åªå¢å¤§1ï½2%ï¼Œå¹³å‡å¸§ç‡ä¸‹é™ä¹Ÿåœ¨2å¸§ä»¥å†…ã€‚è™½ç„¶æ’æ¡©æ–¹æ¡ˆå¯¹æ€§èƒ½çš„å½±å“æ€»ä½“è¿˜å¯ä»¥æ¥å—ï¼Œä½†åªä¼šåœ¨ç°åº¦åŒ…ä½¿ç”¨ã€‚</p><p>æ’æ¡©æ–¹æ¡ˆçœ‹èµ·æ¥ç¾å¥½ï¼Œå®ƒä¹Ÿæœ‰è‡ªå·±çš„çŸ­æ¿ï¼Œé‚£å°±æ˜¯åªèƒ½ç›‘æ§åº”ç”¨å†…è‡ªèº«çš„å‡½æ•°è€—æ—¶ï¼Œæ— æ³•ç›‘æ§ç³»ç»Ÿçš„å‡½æ•°è°ƒç”¨ï¼Œæ•´ä¸ªå †æ ˆçœ‹èµ·æ¥å¥½åƒâ€œç¼ºå¤±äº†â€ä¸€éƒ¨åˆ†ã€‚</p><p><strong>3. Profilo</strong></p><p>2018å¹´3æœˆï¼ŒFacebookå¼€æºäº†ä¸€ä¸ªå«<a href="http://github.com/facebookincubator/profilo">Profilo</a>çš„åº“ï¼Œå®ƒæ”¶é›†äº†å„å¤§æ–¹æ¡ˆçš„ä¼˜ç‚¹ï¼Œä»¤æˆ‘çœ¼å‰ä¸€äº®ã€‚å…·ä½“æ¥è¯´æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p><p><strong>ç¬¬ä¸€ï¼Œé›†æˆatraceåŠŸèƒ½</strong>ã€‚ftraceæ‰€æœ‰æ€§èƒ½åŸ‹ç‚¹æ•°æ®éƒ½ä¼šé€šè¿‡trace_markeræ–‡ä»¶å†™å…¥å†…æ ¸ç¼“å†²åŒºï¼ŒProfiloé€šè¿‡PLT  Hookæ‹¦æˆªäº†å†™å…¥æ“ä½œï¼Œé€‰æ‹©éƒ¨åˆ†å…³å¿ƒçš„äº‹ä»¶åšåˆ†æã€‚è¿™æ ·æ‰€æœ‰systraceçš„æ¢é’ˆæˆ‘ä»¬éƒ½å¯ä»¥æ‹¿åˆ°ï¼Œä¾‹å¦‚å››å¤§ç»„ä»¶ç”Ÿå‘½å‘¨æœŸã€é”ç­‰å¾…æ—¶é—´ã€ç±»æ ¡éªŒã€GCæ—¶é—´ç­‰ã€‚</p><p><strong>ä¸è¿‡å¤§éƒ¨åˆ†çš„atraceäº‹ä»¶éƒ½æ¯”è¾ƒç¬¼ç»Ÿï¼Œä»äº‹ä»¶â€œB|pid|activityStartâ€ï¼Œæˆ‘ä»¬å¹¶ä¸çŸ¥é“å…·ä½“æ˜¯å“ªä¸ªActivityçš„åˆ›å»º</strong>ã€‚åŒæ ·æˆ‘ä»¬å¯ä»¥ç»Ÿè®¡GCç›¸å…³äº‹ä»¶çš„è€—æ—¶ï¼Œä½†æ˜¯ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆå‘ç”Ÿäº†è¿™æ¬¡GCã€‚</p><p><img src="https://static001.geekbang.org/resource/image/7f/fc/7f4abeb31fbc50546b0481435e7a7bfc.jpg" alt=""></p><p><strong>ç¬¬äºŒï¼Œå¿«é€Ÿè·å–Javaå †æ ˆ</strong>ã€‚<strong>å¾ˆå¤šåŒå­¦æœ‰ä¸€ä¸ªè¯¯åŒºï¼Œè§‰å¾—åœ¨æŸä¸ªçº¿ç¨‹ä¸æ–­åœ°è·å–ä¸»çº¿ç¨‹å †æ ˆæ˜¯ä¸è€—æ—¶çš„ã€‚ä½†æ˜¯äº‹å®ä¸Šè·å–å †æ ˆçš„ä»£ä»·æ˜¯å·¨å¤§çš„ï¼Œå®ƒè¦æš‚åœä¸»çº¿ç¨‹çš„è¿è¡Œ</strong>ã€‚</p><p>Profiloçš„å®ç°éå¸¸ç²¾å¦™ï¼Œå®ƒå®ç°ç±»ä¼¼Nativeå´©æºƒæ•æ‰çš„æ–¹å¼å¿«é€Ÿè·å–Javaå †æ ˆï¼Œé€šè¿‡é—´éš”å‘é€SIGPROFä¿¡å·ï¼Œæ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://static001.geekbang.org/resource/image/2f/b7/2f00261346ba4c85c9ae522766cf05b7.jpg" alt=""></p><p>Signal Handleræ•è·åˆ°ä¿¡å·åï¼Œæ‹¿å–åˆ°å½“å‰æ­£åœ¨æ‰§è¡Œçš„Threadï¼Œé€šè¿‡Threadå¯¹è±¡å¯ä»¥è·å–å½“å‰çº¿ç¨‹çš„ManagedStackï¼ŒManagedStackæ˜¯ä¸€ä¸ªå•é“¾è¡¨ï¼Œå®ƒä¿å­˜äº†å½“å‰çš„ShadowFrameæˆ–è€…QuickFrameæ ˆæŒ‡é’ˆï¼Œå…ˆä¾æ¬¡éå†ManagedStacké“¾è¡¨ï¼Œç„¶åéå†å…¶å†…éƒ¨çš„ShadowFrameæˆ–è€…QuickFrameè¿˜åŸä¸€ä¸ªå¯è¯»çš„è°ƒç”¨æ ˆï¼Œä»è€Œunwindå‡ºå½“å‰çš„Javaå †æ ˆã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥å®ç°çº¿ç¨‹ä¸€è¾¹ç»§ç»­è·‘æ­¥ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¸®å®ƒåšæ£€æŸ¥ï¼Œè€Œä¸”è€—æ—¶åŸºæœ¬å¿½ç•¥ä¸è®¡ã€‚ä»£ç å¯ä»¥å‚ç…§ï¼š<a href="http://github.com/facebookincubator/profilo/blob/master/cpp/profiler/unwindc/android_712/arm/unwinder.h">Profilo::unwind</a>å’Œ<a href="http://androidxref.com/7.1.1_r6/xref/art/runtime/stack.cc#772">StackVisitor::WalkStack</a>ã€‚</p><p>ä¸ç”¨æ’æ¡©ã€æ€§èƒ½åŸºæœ¬æ²¡æœ‰å½±å“ã€æ•æ‰ä¿¡æ¯è¿˜å…¨ï¼Œé‚£Profiloä¸å°±æ˜¯å®Œç¾çš„åŒ–èº«å—ï¼Ÿå½“ç„¶ç”±äºå®ƒåˆ©ç”¨äº†å¤§é‡çš„é»‘ç§‘æŠ€ï¼Œå…¼å®¹æ€§æ˜¯éœ€è¦æ³¨æ„çš„é—®é¢˜ã€‚å®ƒå†…éƒ¨å®ç°æœ‰å¤§é‡å‡½æ•°çš„Hookï¼Œunwindä¹Ÿéœ€è¦å¼ºä¾èµ–Android Runtimeå®ç°ã€‚Facebookå·²ç»å°†ProfiloæŠ•å…¥åˆ°çº¿ä¸Šä½¿ç”¨ï¼Œä½†ç”±äºç›®å‰Profiloå¿«é€Ÿè·å–å †æ ˆåŠŸèƒ½ä¾ç„¶ä¸æ”¯æŒAndroid 8.0å’ŒAndroid  9.0ï¼Œé‰´äºç¨³å®šæ€§é—®é¢˜ï¼Œå»ºè®®é‡‡å–æŠ½æ ·éƒ¨åˆ†ç”¨æˆ·çš„æ–¹å¼æ¥å¼€å¯è¯¥åŠŸèƒ½ã€‚</p><p><strong>å…ˆå°ç»“ä¸€ä¸‹ï¼Œä¸ç®¡æˆ‘ä»¬ä½¿ç”¨å“ªç§å¡é¡¿ç›‘æ§æ–¹æ³•ï¼Œæœ€åæˆ‘ä»¬éƒ½å¯ä»¥å¾—åˆ°å¡é¡¿æ—¶çš„å †æ ˆå’Œå½“æ—¶CPUè¿è¡Œçš„ä¸€äº›ä¿¡æ¯ã€‚å¤§éƒ¨åˆ†çš„å¡é¡¿é—®é¢˜éƒ½æ¯”è¾ƒå¥½å®šä½ï¼Œä¾‹å¦‚ä¸»çº¿ç¨‹æ‰§è¡Œä¸€ä¸ªè€—æ—¶ä»»åŠ¡ã€è¯»ä¸€ä¸ªéå¸¸å¤§çš„æ–‡ä»¶æˆ–è€…æ˜¯æ‰§è¡Œç½‘ç»œè¯·æ±‚ç­‰ã€‚</strong></p><h2>å…¶ä»–ç›‘æ§</h2><p>é™¤äº†ä¸»çº¿ç¨‹çš„è€—æ—¶è¿‡é•¿ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æœ‰å“ªäº›å¡é¡¿é—®é¢˜éœ€è¦å…³æ³¨å‘¢ï¼Ÿ</p><p>Android Vitalsæ˜¯Google Playå®˜æ–¹çš„æ€§èƒ½ç›‘æ§æœåŠ¡ï¼Œæ¶‰åŠå¡é¡¿ç›¸å…³çš„ç›‘æ§æœ‰ANRã€å¯åŠ¨ã€å¸§ç‡ä¸‰ä¸ªã€‚å°¤å…¶æ˜¯ANRç›‘æ§ï¼Œæˆ‘ä»¬åº”è¯¥ç»å¸¸çš„æ¥çœ‹çœ‹ï¼Œä¸»è¦æ˜¯Googleè‡ªå·±æ˜¯æœ‰æƒé™å¯ä»¥å‡†ç¡®ç›‘æ§å’Œä¸ŠæŠ¥ANRã€‚</p><p>å¯¹äºå¯åŠ¨å’Œå¸§ç‡ï¼ŒAndroid Vitalsåªæ˜¯ä¸ŠæŠ¥äº†åº”ç”¨çš„åŒºé—´åˆ†å¸ƒï¼Œä½†æ˜¯ä¸èƒ½å½’çº³å‡ºé—®é¢˜ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬åšæ€§èƒ½ä¼˜åŒ–æ—¶æ¯”è¾ƒè¿·æƒ‘çš„ä¸€ç‚¹ï¼Œå³ä½¿å‘ç°æ•´ä½“çš„å¸§ç‡æ¯”è¿‡å»é™ä½äº†5å¸§ï¼Œä¹Ÿå¹¶ä¸çŸ¥é“æ˜¯å“ªé‡Œé€ æˆçš„ï¼Œè¿˜æ˜¯è¦èŠ±å¾ˆå¤§çš„åŠ›æ°”å»åšäºŒæ¬¡æ’æŸ¥ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/fc/fa/fc93805b240cccbcb8474968a2bfb9fa.png" alt=""></p><p>èƒ½ä¸èƒ½åšåˆ°è·Ÿå´©æºƒã€å¡é¡¿ä¸€æ ·ï¼Œç›´æ¥ç»™æˆ‘ä¸€ä¸ªå †æ ˆï¼Œå‘Šè¯‰æˆ‘å°±æ˜¯å› ä¸ºè¿™é‡Œå†™çš„ä¸å¥½å¯¼è‡´å¸§ç‡ä¸‹é™äº†5å¸§ã€‚é€€ä¸€æ­¥è¯´ï¼Œå¦‚æœåšä¸åˆ°ç›´æ¥å‘Šè¯‰æˆ‘å †æ ˆï¼Œèƒ½ä¸èƒ½å‘Šè¯‰æˆ‘æ˜¯å› ä¸ºèŠå¤©è¿™ä¸ªé¡µé¢å¯¼è‡´çš„å¸§ç‡ä¸‹é™ï¼Œè®©æˆ‘ç¼©å°äºŒæ¬¡æ’æŸ¥çš„èŒƒå›´ã€‚</p><p><strong>1. å¸§ç‡</strong></p><p>ä¸šç•Œéƒ½ä½¿ç”¨Choreographeræ¥ç›‘æ§åº”ç”¨çš„å¸§ç‡ã€‚è·Ÿå¡é¡¿ä¸åŒçš„æ˜¯ï¼Œéœ€è¦æ’é™¤æ‰é¡µé¢æ²¡æœ‰æ“ä½œçš„æƒ…å†µï¼Œæˆ‘ä»¬åº”è¯¥åªåœ¨<strong>ç•Œé¢å­˜åœ¨ç»˜åˆ¶</strong>çš„æ—¶å€™æ‰åšç»Ÿè®¡ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•ç›‘å¬ç•Œé¢æ˜¯å¦å­˜åœ¨ç»˜åˆ¶è¡Œä¸ºå‘¢ï¼Ÿå¯ä»¥é€šè¿‡addOnDrawListenerå®ç°ã€‚</p><pre><code>getWindow().getDecorView().getViewTreeObserver().addOnDrawListener
</code></pre><p>æˆ‘ä»¬ç»å¸¸ç”¨å¹³å‡å¸§ç‡æ¥è¡¡é‡ç•Œé¢æµç•…åº¦ï¼Œä½†äº‹å®ä¸Šç”µå½±çš„å¸§ç‡æ‰24å¸§ï¼Œç”¨æˆ·å¯¹äºåº”ç”¨çš„å¹³å‡å¸§ç‡æ˜¯40å¸§è¿˜æ˜¯50å¸§å¹¶ä¸ä¸€å®šå¯ä»¥æ„Ÿå—å‡ºæ¥ã€‚å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œæ„Ÿè§‰æœ€æ˜æ˜¾çš„æ˜¯è¿ç»­ä¸¢å¸§æƒ…å†µï¼ŒAndroid Vitalså°†è¿ç»­ä¸¢å¸§è¶…è¿‡700æ¯«ç§’å®šä¹‰ä¸ºå†»å¸§ï¼Œä¹Ÿå°±æ˜¯è¿ç»­ä¸¢å¸§42å¸§ä»¥ä¸Šã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç»Ÿè®¡æ›´æœ‰ä»·å€¼çš„å†»å¸§ç‡ã€‚<strong>å†»å¸§ç‡å°±æ˜¯è®¡ç®—å‘ç”Ÿå†»å¸§æ—¶é—´åœ¨æ‰€æœ‰æ—¶é—´çš„å æ¯”</strong>ã€‚å‡ºç°ä¸¢å¸§çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è·å–å½“å‰çš„é¡µé¢ä¿¡æ¯ã€Viewä¿¡æ¯å’Œæ“ä½œè·¯å¾„ä¸ŠæŠ¥åå°ï¼Œé™ä½äºŒæ¬¡æ’æŸ¥çš„éš¾åº¦ã€‚</p><p>æ­£å¦‚ä¸‹å›¾ä¸€æ ·ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŒ‰ç…§Activityã€Fragmentæˆ–è€…æŸä¸ªæ“ä½œå®šä¹‰åœºæ™¯ï¼Œé€šè¿‡ç»†åŒ–ä¸åŒåœºæ™¯çš„å¹³å‡å¸§ç‡å’Œå†»å¸§ç‡ï¼Œè¿›ä¸€æ­¥ç»†åŒ–é—®é¢˜æ’æŸ¥çš„èŒƒå›´ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/73/ba/73b185f989a20e868886d10c864c43ba.png" alt=""></p><p><strong>2. ç”Ÿå‘½å‘¨æœŸç›‘æ§</strong></p><p>Activityã€Serviceã€Receiverç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„è€—æ—¶å’Œè°ƒç”¨æ¬¡æ•°ä¹Ÿæ˜¯æˆ‘ä»¬é‡ç‚¹å…³æ³¨çš„æ€§èƒ½é—®é¢˜ã€‚ä¾‹å¦‚Activityçš„onCreate()ä¸åº”è¯¥è¶…è¿‡1ç§’ï¼Œä¸ç„¶ä¼šå½±å“ç”¨æˆ·çœ‹åˆ°é¡µé¢çš„æ—¶é—´ã€‚Serviceå’ŒReceiverè™½ç„¶æ˜¯åå°ç»„ä»¶ï¼Œä¸è¿‡å®ƒä»¬ç”Ÿå‘½å‘¨æœŸä¹Ÿæ˜¯å ç”¨ä¸»çº¿ç¨‹çš„ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„é—®é¢˜ã€‚</p><p>å¯¹äºç»„ä»¶ç”Ÿå‘½å‘¨æœŸæˆ‘ä»¬åº”è¯¥é‡‡ç”¨æ›´ä¸¥æ ¼åœ°ç›‘æ§ï¼Œå¯ä»¥å…¨é‡ä¸ŠæŠ¥ã€‚åœ¨åå°æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å„ä¸ªç»„ä»¶å„ä¸ªç”Ÿå‘½å‘¨æœŸçš„å¯åŠ¨æ—¶é—´å’Œå¯åŠ¨æ¬¡æ•°ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/d4/67/d4e8abcb054793168dff716c7956ae67.png" alt=""></p><p>æœ‰ä¸€æ¬¡æˆ‘ä»¬å‘ç°æœ‰ä¸¤ä¸ªServiceçš„å¯åŠ¨æ¬¡æ•°æ˜¯å…¶ä»–çš„10å€ï¼Œç»è¿‡æ’æŸ¥å‘ç°æ˜¯å› ä¸ºé¢‘ç¹çš„äº’ç›¸æ‹‰èµ·å¯¼è‡´ã€‚Receiverä¹Ÿæ˜¯è¿™æ ·ï¼Œè€Œä¸”å®ƒä»¬éƒ½éœ€è¦ç»è¿‡System Serverã€‚æ›¾ç»æœ‰ä¸€ä¸ªæ—¥å¿—ä¸ŠæŠ¥æ¨¡å—é€šè¿‡Broadcastæ¥åšè·¨è¿›ç¨‹é€šä¿¡ï¼Œæ¯ç§’å‘é€å‡ åƒæ¬¡è¯·æ±‚ï¼Œå¯¼è‡´ç³»ç»ŸSystem Serverå¡æ­»ã€‚æ‰€ä»¥è¯´æ¯ä¸ªç»„ä»¶å„ä¸ªç”Ÿå‘½å‘¨æœŸçš„è°ƒç”¨æ¬¡æ•°ä¹Ÿæ˜¯éå¸¸æœ‰å‚è€ƒä»·å€¼çš„æŒ‡æ ‡ã€‚</p><p>é™¤äº†å››å¤§ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç›‘æ§å„ä¸ªè¿›ç¨‹ç”Ÿå‘½å‘¨æœŸçš„å¯åŠ¨æ¬¡æ•°å’Œè€—æ—¶ã€‚é€šè¿‡ä¸‹é¢çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæŸäº›è¿›ç¨‹æ˜¯å¦é¢‘ç¹åœ°æ‹‰èµ·ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/53/0c/534e422d44eb4b08ebdac2181b87f70c.png" alt=""></p><p>å¯¹äºç”Ÿå‘½å‘¨æœŸçš„ç›‘æ§å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ’ä»¶åŒ–æŠ€æœ¯Hookçš„æ–¹å¼ã€‚ä½†æ˜¯Android Pä¹‹åï¼Œæˆ‘è¿˜æ˜¯ä¸å¤ªæ¨èä½ ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚æˆ‘æ›´æ¨èä½¿ç”¨ç¼–è¯‘æ—¶æ’æ¡©çš„æ–¹å¼ï¼Œ<strong>åé¢æˆ‘ä¼šè®²åˆ°Aspectã€ASMå’ŒReDexä¸‰ç§æ’æ¡©æŠ€æœ¯çš„å®ç°ï¼Œæ•¬è¯·æœŸå¾…ã€‚</strong></p><p><strong>3. çº¿ç¨‹ç›‘æ§</strong></p><p>Javaçº¿ç¨‹ç®¡ç†æ˜¯å¾ˆå¤šåº”ç”¨éå¸¸å¤´ç—›çš„äº‹æƒ…ï¼Œåº”ç”¨å¯åŠ¨è¿‡ç¨‹å°±å·²ç»åˆ›å»ºäº†å‡ åä¸Šç™¾ä¸ªçº¿ç¨‹ã€‚è€Œä¸”å¤§éƒ¨åˆ†çš„çº¿ç¨‹éƒ½æ²¡æœ‰ç»è¿‡çº¿ç¨‹æ± ç®¡ç†ï¼Œéƒ½åœ¨è‡ªç”±è‡ªåœ¨åœ°ç‹‚å¥”ç€ã€‚</p><p>å¦å¤–ä¸€æ–¹é¢æŸäº›çº¿ç¨‹ä¼˜å…ˆçº§æˆ–è€…æ´»è·ƒåº¦æ¯”è¾ƒé«˜ï¼Œå ç”¨äº†è¿‡å¤šçš„CPUã€‚è¿™ä¼šé™ä½ä¸»çº¿ç¨‹UIå“åº”èƒ½åŠ›ï¼Œæˆ‘ä»¬éœ€è¦ç‰¹åˆ«é’ˆå¯¹è¿™äº›çº¿ç¨‹åšé‡ç‚¹çš„ä¼˜åŒ–ã€‚</p><p>å¯¹äºJavaçº¿ç¨‹ï¼Œæ€»çš„æ¥è¯´æˆ‘ä¼šç›‘æ§ä»¥ä¸‹ä¸¤ç‚¹ã€‚</p><ul>
<li>
<p>çº¿ç¨‹æ•°é‡ã€‚éœ€è¦ç›‘æ§çº¿ç¨‹æ•°é‡çš„å¤šå°‘ï¼Œä»¥åŠåˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ã€‚ä¾‹å¦‚æœ‰æ²¡æœ‰ä½¿ç”¨æˆ‘ä»¬ç‰¹æœ‰çš„çº¿ç¨‹æ± ï¼Œè¿™å—å¯ä»¥é€šè¿‡got hookçº¿ç¨‹çš„nativeCreate()å‡½æ•°ã€‚ä¸»è¦ç”¨äºè¿›è¡Œçº¿ç¨‹æ”¶æ•›ï¼Œä¹Ÿå°±æ˜¯å‡å°‘çº¿ç¨‹æ•°é‡ã€‚</p>
</li>
<li>
<p>çº¿ç¨‹æ—¶é—´ã€‚ç›‘æ§çº¿ç¨‹çš„ç”¨æˆ·æ—¶é—´utimeã€ç³»ç»Ÿæ—¶é—´stimeå’Œä¼˜å…ˆçº§ã€‚ä¸»è¦æ˜¯çœ‹å“ªäº›çº¿ç¨‹utime+stimeæ—¶é—´æ¯”è¾ƒå¤šï¼Œå ç”¨äº†è¿‡å¤šçš„CPUã€‚<strong>æ­£å¦‚ä¸Šä¸€æœŸâ€œæ¯è¯¾ä¸€ç»ƒâ€æ‰€æåˆ°çš„ï¼Œå¯èƒ½æœ‰ä¸€äº›çº¿ç¨‹å› ä¸ºç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­å¯¼è‡´å¾ˆéš¾å‘ç°ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ç»“åˆçº¿ç¨‹åˆ›å»ºç›‘æ§ã€‚</strong></p>
</li>
</ul><p><img src="https://static001.geekbang.org/resource/image/52/53/52a236b3d3af37869a4eaf087b4ddf53.png" alt=""></p><p><strong>çœ‹åˆ°è¿™é‡Œå¯èƒ½æœ‰åŒå­¦ä¼šæ¯”è¾ƒå›°æƒ‘ï¼Œå¡é¡¿ä¼˜åŒ–çš„ä¸»é¢˜å°±æ˜¯ç›‘æ§å—ï¼Ÿå¯¼è‡´å¡é¡¿çš„åŸå› ä¼šæœ‰å¾ˆå¤šï¼Œæ¯”å¦‚å‡½æ•°éå¸¸è€—æ—¶ã€I/Oéå¸¸æ…¢ã€çº¿ç¨‹é—´çš„ç«äº‰æˆ–è€…é”ç­‰ã€‚å…¶å®å¾ˆå¤šæ—¶å€™å¡é¡¿é—®é¢˜å¹¶ä¸éš¾è§£å†³ï¼Œç›¸è¾ƒè§£å†³æ¥è¯´ï¼Œæ›´å›°éš¾çš„æ˜¯å¦‚ä½•å¿«é€Ÿå‘ç°è¿™äº›å¡é¡¿ç‚¹ï¼Œä»¥åŠé€šè¿‡æ›´å¤šçš„è¾…åŠ©ä¿¡æ¯æ‰¾åˆ°çœŸæ­£çš„å¡é¡¿åŸå› ã€‚</strong></p><p>å°±è·Ÿåœ¨æœ¬åœ°ä½¿ç”¨å„ç§å¡é¡¿åˆ†æå·¥å…·ä¸€æ ·ï¼Œå¡é¡¿ä¼˜åŒ–çš„éš¾ç‚¹åœ¨äºå¦‚ä½•æŠŠå®ƒä»¬ç§»æ¤åˆ°çº¿ä¸Šï¼Œä»¥æœ€å°‘çš„æ€§èƒ½ä»£ä»·è·å¾—æ›´åŠ ä¸°å¯Œçš„å¡é¡¿ä¿¡æ¯ã€‚å½“ç„¶æŸäº›å¡é¡¿é—®é¢˜å¯èƒ½æ˜¯I/Oã€å­˜å‚¨æˆ–è€…ç½‘ç»œå¼•å‘çš„ï¼Œåé¢ä¼šè¿˜æœ‰ä¸“é—¨çš„å†…å®¹æ¥è®²è¿™äº›é—®é¢˜çš„ä¼˜åŒ–æ–¹æ³•ã€‚</p><h2>æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†å¡é¡¿ç›‘æ§çš„å‡ ç§æ–¹æ³•ã€‚éšç€æŠ€æœ¯çš„æ·±å…¥ï¼Œæˆ‘ä»¬å‘ç°äº†æ—§æ–¹æ¡ˆçš„ä¸€äº›ç¼ºç‚¹ï¼Œé€šè¿‡ä¸æ–­åœ°è¿­ä»£å’Œæ¼”è¿›ï¼Œå¯»æ‰¾æ›´å¥½çš„æ–¹æ¡ˆã€‚</p><p>Facebookçš„Profiloå®ç°äº†å¿«é€Ÿè·å–Javaå †æ ˆï¼Œå…¶å®å®ƒå‚è€ƒçš„æ˜¯JVMçš„AsyncGetCallTraceæ€è·¯ï¼Œç„¶åé€‚é…Android Runtimeçš„å®ç°ã€‚systraceä½¿ç”¨çš„æ˜¯Linuxçš„ftraceï¼ŒSimpleperfå‚è€ƒäº†Linuxçš„perfå·¥å…·ã€‚è¿˜æ˜¯ç†Ÿæ‚‰çš„é…æ–¹ï¼Œè¿˜æ˜¯ç†Ÿæ‚‰çš„å‘³é“ï¼Œæˆ‘ä»¬å¾ˆå¤šåˆ›æ–°æ€§çš„ä¸œè¥¿ï¼Œå…¶å®è¿˜æ˜¯åŸºäºJavaå’ŒLinuxåå¹´å‰çš„äº§ç‰©ã€‚</p><p>è¿˜æ˜¯å›åˆ°æˆ‘åœ¨ä¸“æ å¼€ç¯‡è¯è¯´è¿‡çš„ï¼Œåˆ‡è®°ä¸è¦æµ®èºï¼Œå¤šäº†è§£å’Œå­¦ä¹ ä¸€äº›åº•å±‚çš„æŠ€æœ¯ï¼Œå¯¹æˆ‘ä»¬çš„æˆé•¿ä¼šæœ‰å¾ˆå¤§å¸®åŠ©ã€‚<strong>æ—¥å¸¸å¼€å‘ä¸­æˆ‘ä»¬ä¹Ÿä¸èƒ½åªæ»¡è¶³äºå®Œæˆéœ€æ±‚å°±å¯ä»¥äº†ï¼Œåœ¨å®ç°ä¸Šåº”è¯¥å­¦ä¼šå¤šå»æ€è€ƒå†…å­˜ã€å¡é¡¿è¿™äº›å½±å“æ€§èƒ½çš„ç‚¹ï¼Œæˆ‘ä»¬æ¯”åˆ«äººå¤šæƒ³ä¸€äº›ã€å¤šåšä¸€äº›ï¼Œè‡ªå·±çš„è¿›æ­¥è‡ªç„¶ä¹Ÿä¼šæ›´å¿«ä¸€äº›ã€‚</strong></p><h2>è¯¾åä½œä¸š</h2><p>çœ‹å®Œæˆ‘åˆ†äº«çš„å¡é¡¿ä¼˜åŒ–çš„æ–¹æ³•åï¼Œç›¸ä¿¡ä½ ä¹Ÿè‚¯å®šè¿˜æœ‰å¾ˆå¤šå¥½çš„æ€è·¯å’Œæ–¹æ³•ï¼Œ<span class="orange">ä»Šå¤©çš„è¯¾åä½œä¸šæ˜¯åˆ†äº«ä¸€ä¸‹ä½ çš„å¡é¡¿ä¼˜åŒ–çš„â€œå¿…æ€æŠ€â€ï¼Œåœ¨ç•™è¨€åŒºåˆ†äº«ä¸€ä¸‹ä»Šå¤©å­¦ä¹ ã€ç»ƒä¹ çš„æ”¶è·ä¸å¿ƒå¾—</span>ã€‚</p><h2>è¯¾åç»ƒä¹ </h2><p>æˆ‘åœ¨ä¸Šä¸€æœŸä¸­æåˆ°è¿‡Linuxçš„ftraceæœºåˆ¶ï¼Œè€Œsystraceæ­£æ˜¯åˆ©ç”¨è¿™ä¸ªç³»ç»Ÿæœºåˆ¶å®ç°çš„ã€‚è€ŒProfiloæ›´æ˜¯é€šè¿‡ä¸€äº›é»‘ç§‘æŠ€ï¼Œå®ç°äº†ä¸€ä¸ªå¯ä»¥ç”¨äºçº¿ä¸Šçš„â€œsystraceâ€ã€‚é‚£å®ƒç©¶ç«Ÿæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</p><p>é€šè¿‡ä»Šå¤©è¿™ä¸ª<a href="http://github.com/AndroidAdvanceWithGeektime/Chapter06">Sample</a>ï¼Œä½ å¯ä»¥å­¦ä¹ åˆ°å®ƒçš„å®ç°æ€è·¯ã€‚å½“ä½ å¯¹è¿™äº›åº•å±‚æœºåˆ¶è¶³å¤Ÿç†Ÿæ‚‰çš„æ—¶å€™ï¼Œå¯èƒ½å°±ä¸å±€é™åœ¨æœ¬åœ°ä½¿ç”¨ï¼Œè€Œæ˜¯å¯ä»¥å°†å®ƒä»¬æ¬åˆ°çº¿ä¸Šäº†ã€‚</p><p>å½“ç„¶ï¼Œä¸ºäº†èƒ½æ›´å¥½åœ°ç†è§£è¿™ä¸ªSampleï¼Œå¯èƒ½ä½ è¿˜éœ€è¦è¡¥å……ä¸€äº›ftraceå’Œatraceç›¸å…³çš„èƒŒæ™¯çŸ¥è¯†ã€‚ä½ ä¼šå‘ç°è¿™äº›çš„ç¡®éƒ½æ˜¯Linuxåå¹´å‰çš„ä¸€äº›çŸ¥è¯†ï¼Œä½†æ—¶è‡³ä»Šæ—¥å®ƒä»¬ä¾ç„¶éå¸¸æœ‰ç”¨ã€‚</p><p>1.<a href="http://www.ibm.com/developerworks/cn/linux/l-cn-ftrace/index.html">ftrace ç®€ä»‹</a>ã€<a href="http://www.ibm.com/developerworks/cn/linux/l-cn-ftrace1/index.html">ftraceä½¿ç”¨ï¼ˆä¸Šï¼‰</a>ã€<a href="http://www.ibm.com/developerworks/cn/linux/l-cn-ftrace2/index.html">fraceä½¿ç”¨ï¼ˆä¸‹ï¼‰</a>ã€‚</p><p>2.<a href="http://source.android.com/devices/tech/debug/ftrace">atraceä»‹ç»</a>ã€<a href="http://android.googlesource.com/platform/frameworks/native/+/master/cmds/atrace/atrace.cpp">atraceå®ç°</a>ã€‚</p><p>æ¬¢è¿ä½ ç‚¹å‡»â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™å¥½å‹ï¼Œé‚€è¯·ä»–ä¸€èµ·å­¦ä¹ ã€‚æœ€ååˆ«å¿˜äº†åœ¨è¯„è®ºåŒºæäº¤ä»Šå¤©çš„ä½œä¸šï¼Œæˆ‘ä¹Ÿä¸ºè®¤çœŸå®Œæˆä½œä¸šçš„åŒå­¦å‡†å¤‡äº†ä¸°åšçš„â€œå­¦ä¹ åŠ æ²¹ç¤¼åŒ…â€ï¼ŒæœŸå¾…ä¸ä½ ä¸€èµ·åˆ‡ç£‹è¿›æ­¥å“¦ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/bf/f1/bf8fdc35ddccb10b1161d8ca7eb8f8f1.jpg" alt=""></p>
                    </div>
                </div>

            </div>
            <div data-v-87ffcada="" class="article-comments pd"><h2 data-v-87ffcada=""><span
                    data-v-87ffcada="">ç²¾é€‰ç•™è¨€</span></h2>
                <ul data-v-87ffcada="">
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/45/b2/ee0cfc12.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Seven</span>
                            </div>
                            <div class="bd">æ˜æ˜æ˜¯Androidå¼€å‘è¯¾ï¼Œä½†æ˜¯ç»æ–‡è€å¸ˆåœ¨å¾ˆå¤šæ–‡ç« ä¸­éƒ½ä¼šæåˆ°Linuxï¼ŒJVMç›¸å…³çš„çŸ¥è¯†ï¼Œæ·±å…¥ä¼˜åŒ–å°±æ˜¯æ·±å…¥åº•å±‚å•Šï¼Œç›®å‰çš„èƒ½åŠ›ä¸è¶³ä»¥æ¶ˆåŒ–è¿™ç¯‡æ–‡ç« ï¼ŒåŒæ—¶å¸Œæœ›ç»æ–‡è€å¸ˆå’Œé¹é£è€å¸ˆæ¨èç›¸å…³ä¹¦ç± <br></div>
                            <span class="time">2018-12-13 17:36</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/2e/6a/fa3dc298.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Georgeå´é€¸äº‘</span>
                            </div>
                            <div class="bd">å·²ç»æ‰é˜Ÿäº†ï¼Œåº•å±‚åŸºç¡€å¤ªå·®äº†ğŸ˜­ <br></div>
                            <span class="time">2018-12-13 18:55</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/0f/b2/41/d9dcc7ef.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å¸Œå¤·</span>
                            </div>
                            <div class="bd">å¦‚æœç»™å®Œå…¨æ²¡æœ‰å¡é¡¿çš„APPæ‰“åˆ†100çš„è¯ï¼Œå¯¹äºå¤§å‚çš„APPæœ¬æ¥å°±æœ‰90åˆ†ï¼Œè¿½æ±‚çš„æ˜¯å¦‚ä½•å°†åˆ†æ•°æåˆ°95ï¼Œ98ï¼Œ99ï¼Œç”šè‡³100ï¼Œé‚µæ–‡è€å¸ˆæ‰€è®²ä¸»è¦ä¹Ÿæ˜¯é’ˆå¯¹è¿™å—ï¼›ä½†å¯¹äºå¾ˆå¤šæƒ³æˆ‘è¿™æ ·çš„å°å…¬å¸å¼€å‘è€…æ¥è¯´ï¼Œå—äººåŠ›ç‰©åŠ›æ—¶é—´æ‰€é™ï¼Œæƒ³åšåˆ°çš„å…¶å®æ˜¯å…ˆè¾¾åˆ°90åˆ†ï¼Œè€Œè¿™å—ä¸“æ æ¶‰åŠçš„æœ‰é™ï¼Œå¯¹äºè·Ÿæˆ‘ç±»ä¼¼çš„å—ä¼—ä¸å¤Ÿå‹å¥½ã€‚ <br></div>
                            <span class="time">2018-12-15 00:48</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å…¶å®ä¸æ˜¯ï¼Œè¿™ä¸ªä¸“æ æˆ‘æ›´å…³æ³¨çš„æ˜¯äººçš„æˆé•¿ï¼Œè€Œä¸æ˜¯å…·ä½“åº”ç”¨åˆ°å“ªé‡Œã€‚<br><br>å½“ç„¶å¯ä»¥æŠŠçŸ¥è¯†è½¬åŒ–åº”ç”¨åˆ°å·¥ä½œä¸­æ•ˆæœä¼šæ›´åŠ å¥½</p>
                                <p class="reply-time">2018-12-15 09:17</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/35/87/b2a1e5cc.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">catkin</span>
                            </div>
                            <div class="bd">å¼ è€å¸ˆï¼Œçœ‹å®Œè¿™ç¯‡æ–‡ç« æˆ‘å·²ç»å¼€å§‹æ€€ç–‘äººç”Ÿäº†ï¼ŒæŒæ¡è¿™ä¹ˆå¤šçŸ¥è¯†æ‚¨æ˜¯æ€ä¹ˆåŠåˆ°çš„ï¼Œè€Œä¸”å¯¹é‚£äº›é»‘ç§‘æŠ€äº†å¦‚æŒ‡æŒï¼Œè¿˜èƒ½ä¸¾ä¸€åä¸‰ï¼Œæ„Ÿè§‰å°±è·Ÿç©ä¸€æ ·ï¼èƒ½ä¸èƒ½èµæ•™ä¸€ä¸‹æ€ä¹ˆåšåˆ°çš„ï¼Ÿ <br></div>
                            <span class="time">2018-12-13 21:08</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/d4/8d/a3fd8957.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Kenny</span>
                            </div>
                            <div class="bd">å¼ è€å¸ˆï¼Œåˆšè¯•äº†ä½ ç»™çš„Sampleï¼Œplthookå®ç°çš„è‡ªå®šä¹‰ftraceï¼ŒBä¸Eäº‹ä»¶æ—¥å¿—ä¸æˆå¯¹ï¼Ÿè¿™ä¸ªæ€ä¹ˆçœ‹æ¯ä¸€ä¸ªäº‹ä»¶çš„è€—æ—¶ï¼Ÿæ¯ä¸ªBæ‰¾æœ€è¿‘çš„Eä½œä¸ºæˆªæ­¢ç®—æ—¶é—´å—ï¼Ÿè¿˜æ˜¯æŒ‰ç…§ä¸€ä¸ªBå¯¹åº”ä¸€ä¸ªEå»ç®—ï¼Ÿè¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯è¯¾ç¨‹æåˆ°é€šè¿‡hook thread_createå»ç›‘æ§çº¿ç¨‹ï¼Œè¿™ä¸ªæ˜¯æŒ‡ç›‘æ§åº”ç”¨çš„çº¿ç¨‹å—ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œé‚£ç³»ç»Ÿçš„çº¿ç¨‹æ¯”å¦‚binderï¼Œjitç­‰å¦‚ä½•å»ç›‘æ§ï¼Ÿè¯è¯´è¿™ä¸ªå¼ è€å¸ˆèƒ½æŠŠhook çº¿ç¨‹åˆ›å»ºçš„å®ç°ä¹Ÿæ”¾Sample? <br></div>
                            <span class="time">2018-12-13 12:14</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">äº‹ä»¶æ˜¯æœ€è¿‘åŒ¹é…<br><br>çº¿ç¨‹hooké‚£ä¸ªå¾ˆç®€å•çš„ï¼Œæˆ‘ä¸‹æ¬¡æ”¾åˆ°sampleé‡Œé¢</p>
                                <p class="reply-time">2018-12-14 14:27</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/50/2f/afd9c67c.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">x-ray</span>
                            </div>
                            <div class="bd">ä½œè€…æ‚¨å¥½ï¼Œæˆ‘ä»¬åº”ç”¨çš„å¾ˆå¤šç”¨æˆ·ï¼Œandroidç³»ç»Ÿéƒ½æ˜¯4.4ç‰ˆæœ¬çš„ï¼Œå› ä¸ºåˆ†åŒ…dexä¼˜åŒ–çš„åŸå› ,å¯¼è‡´ç¬¬ä¸€æ¬¡å®‰è£…æˆ–è€…ç‰ˆæœ¬å‡çº§æ—¶å¯åŠ¨çš„æ—¶é—´éå¸¸çš„é•¿ï¼Œæƒ³é—®é—®æ‚¨æœ‰ä»€ä¹ˆå¥½çš„ä¼˜åŒ–æªæ–½ï¼Œè°¢è°¢ <br></div>
                            <span class="time">2018-12-13 20:28</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/51/77/b7f397ea.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å†¬</span>
                            </div>
                            <div class="bd">æœ‰ä¸ªé—®é¢˜è¯·æ•™  ç”¨empty message å»æ£€æŸ¥å¡é¡¿ ï¼Œæ¯”å¦‚1s æ²¡æ¶ˆè´¹ ï¼Œå°±èƒ½è¯´message å¡é¡¿1s å— ï¼Ÿ  å¦‚æœç©ºæ¶ˆæ¯å‰è¾¹æœ‰å‡ ä¸ªæ¶ˆæ¯  æ¯”å¦‚3ä¸ª ï¼Œç°åœ¨æ­£åœ¨æ‰§è¡Œç¬¬ä¸‰ä¸ª æˆ‘è§‰å¾—ä¹Ÿæ­£å¸¸å•Š ä¸èƒ½è¯´æ˜å¡é¡¿å•Š <br></div>
                            <span class="time">2019-01-11 14:56</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/5b/d2/34a8c79c.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Juinn</span>
                            </div>
                            <div class="bd">è¿™èŠ‚è¯¾ï¼Œè®²çš„å°±æ˜¯çœŸæ­£æŠ€æœ¯å®æˆ˜äº†ï¼Œæœæ–­æ–­å±‚ï¼Œå“ˆå“ˆ <br></div>
                            <span class="time">2018-12-25 15:57</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/d5/fa/b1cb4626.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">CHY</span>
                            </div>
                            <div class="bd">é€šè¿‡ proc&#47;cpuinfo å¥½åƒæ‹¿ä¸åˆ° cpu æ ¸æ•°ï¼Œåªèƒ½è·å–åˆ°æ‰“å¼€äº†çš„ cpu æ ¸å¿ƒä¿¡æ¯ã€‚ã€‚ <br></div>
                            <span class="time">2018-12-24 16:58</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å¯ä»¥çœ‹çœ‹å‰é¢è¯´åˆ°é‚£ä¸ªfacebook  device-of-yearçš„å¼€æºåº“</p>
                                <p class="reply-time">2018-12-24 17:53</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/ec/2a/b11d5ad8.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æ›¾ç»ç˜¦è¿‡</span>
                            </div>
                            <div class="bd">åŸºæœ¬çœ‹ä¸å¤ªæ‡‚ï¼Œå‡†å¤‡å¥½å¥½æ³¡æ³¡simple å’Œ è¡¥å……ä¸€äº›åº•å±‚çŸ¥è¯† <br></div>
                            <span class="time">2018-12-21 17:40</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/46/59/7c14e780.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">Sgx</span>
                            </div>
                            <div class="bd">ç»æ–‡å“¥ä½ å¥½ï¼Œè¯·é—®æ¯æ¬¡è¯¾ç¨‹ä¸­æ‰€è¯´çš„é»‘ç§‘æŠ€æ˜¯å•¥æ„æ€ï¼Ÿ <br></div>
                            <span class="time">2018-12-21 01:39</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">å°±æ˜¯ç±»ä¼¼çƒ­ä¿®å¤ï¼Œä¿æ´»ï¼Œä»¥åŠå„ç§åå°„è°ƒç”¨</p>
                                <p class="reply-time">2018-12-21 09:45</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/01/1c/d638d46e.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">çº¢ç©¹</span>
                            </div>
                            <div class="bd">å¤§å¤§ï¼Œèƒ½è®²ä¸€ä¸‹æ ¹æ®ç«ç„°å›¾çš„å…·ä½“æ¡ˆä¾‹å—ï¼Œæˆ‘ä»¬è¿™äº›å…¥é—¨çº§çœ‹çš„å¾ˆè‰°éš¾å•Š <br></div>
                            <span class="time">2018-12-18 08:51</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/5d/27/a8fb15bf.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">qh</span>
                            </div>
                            <div class="bd">æˆ‘å®æœºvivo nex Android 8.1ä¸Šé¢è¿è¡Œchapter 5çš„ä½œä¸šã€‚è°ƒç”¨systeminfoçš„readprocfileæ–¹æ³•ä¼šæŠ¥æƒé™è¢«æ‹’ç»çš„å¼‚å¸¸ï¼Œä½†æ˜¯åœ¨å…¬å¸rootçš„æ‰‹æœºä¸Šå°±ä¸ä¼šã€‚ <br></div>
                            <span class="time">2018-12-17 14:48</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/5d/f2/785169e9.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">é»„æ–°å®‡</span>
                            </div>
                            <div class="bd">æˆ‘ä¹Ÿæ‰é˜Ÿäº†ï¼Œåœ¨å°å…¬å¸ä¸€ç›´æ²¡æœ‰ç•™æ„æ€§èƒ½ä¼˜åŒ–è¿™ä¸€å—ï¼Œä¸€ç›´æ˜¯ä¸€ä¸ªç›²ç‚¹ï¼Œå¯èƒ½éœ€è¦è¡¥è¡¥æ€§èƒ½ä¼˜åŒ–ç›¸å…³çš„ä¸€äº›åŸºç¡€äº† <br></div>
                            <span class="time">2018-12-15 13:57</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/4b/19/6f037647.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">ä¸œæ–¹</span>
                            </div>
                            <div class="bd">ç»™å¤§å®¶æ¨èä¸€ä¸ªæ–¹æ³•ï¼Œè§£æTraceviewç”Ÿæˆçš„traceæ–‡ä»¶ï¼Œå³å¯çŸ¥é“è¿™ä¸ªé˜¶æ®µæ‰€æœ‰è¿è¡Œçš„å‡½æ•°ï¼Œåºåˆ—åŒ–ä¸€ä¸‹ï¼Œå°±èƒ½ç”Ÿæˆéœ€è¦æ’æ¡©çš„ç™½åå•åˆ—è¡¨ã€‚ <br></div>
                            <span class="time">2018-12-14 10:09</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/11/8a/46/71747b18.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æå®¢å­¦å­</span>
                            </div>
                            <div class="bd">ç»æ–‡è€å¸ˆï¼Œæƒ³è¯·æ•™ä¸‹ç›‘æ§åˆ°çš„æ•°æ®çš„å­˜å‚¨å’Œä¸Šä¼ æ–¹æ¡ˆï¼Œè¿˜æœ‰æ€ä¹ˆé˜²æ­¢æ•°æ®ä¸¢å¤±ï¼Œè¿‡å¤šç›‘æ§æ•°æ®ä¸Šä¼ åˆæ˜¯å¦å¯¹ç”¨æˆ·ä¸å¤ªå‹å¥½ <br></div>
                            <span class="time">2018-12-14 09:58</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/07/8c/51401220.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å°ç¾</span>
                            </div>
                            <div class="bd">Nanoscope æ˜¯ä»€ä¹ˆ æ–¹ä¾¿è€å¸ˆè¯´ä¸‹å— <br></div>
                            <span class="time">2018-12-13 21:56</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">nanoscope æ˜¯ uber å¼€å‘çš„ä¸€å¥— Low overhead trace å·¥å…· https:&#47;&#47;github.com&#47;uber&#47;nanoscope</p>
                                <p class="reply-time">2018-12-14 00:40</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/13/d2/33/f980eb71.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">é›¨æ— å°½æ—¶</span>
                            </div>
                            <div class="bd">ä½ å¥½ï¼Œç›®å‰é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œä¸»å·¥ç¨‹ä¸­å¼•å…¥äº†å¾ˆå¤šåº“ï¼Œæ¯ä¸ªåº“éƒ½ä½¿ç”¨äº†è‡ªå·±åˆ›å»ºçš„OkhttpClient, éƒ½æœ‰è‡ªå·±çš„Connectionpool,å¯¼è‡´å¾ˆå¤šçº¿ç¨‹æ— æ³•æœ‰æ•ˆç›‘æ§ï¼Œçº¿ç¨‹æ•°è¿‡å¤šå¼•èµ·OOMï¼Œè¿™ç§æƒ…å†µèƒ½é€šè¿‡ä¸€äº›æ–¹æ³•ç›‘æ§çº¿ç¨‹ç”±å“ªé‡Œåˆ›å»ºçš„ä¸ã€‚<br><br>ç›®å‰çœ‹åˆ°Connectpool ä¸­æœ‰thread factory,æ¥å‘½åthread,å¯å¦é€šè¿‡hookè¯¥å¯¹è±¡åŒºåˆ†çº¿ç¨‹åˆ›å»ºæ–¹ã€‚ <br></div>
                            <span class="time">2018-12-13 12:49</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/10/07/8c/51401220.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å°ç¾</span>
                            </div>
                            <div class="bd">æœ‰ä»€ä¹ˆæ–¹æ¡ˆå¯ä»¥ç»Ÿè®¡ç³»ç»Ÿçº¿ç¨‹æ•°å‘¢ <br></div>
                            <span class="time">2018-12-13 10:26</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">è‡ªå·±åº”ç”¨è¿˜æ˜¯ç³»ç»Ÿçš„ï¼Ÿ<br><br>è‡ªå·±åº”ç”¨å¯ä»¥é€šè¿‡&#47;proc&#47;pid&#47; å‡ ä¸ªlinuxæ–‡ä»¶éƒ½å¯ä»¥æ‹¿åˆ°ï¼Œå‰é¢å´©æºƒä¸­ä¹Ÿæœ‰è¯´</p>
                                <p class="reply-time">2018-12-13 11:26</p>
                            </div>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/72/c0/11cf22de.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">.y</span>
                            </div>
                            <div class="bd">å¼ å“¥ï¼Œæ—©ï¼é—®ä¸€å“ˆï¼Œæ®æˆ‘äº†è§£ï¼Œå¾®ä¿¡æ—©æœŸç‰ˆæœ¬åŸºæœ¬æ¯ä¸ªæ–¹æ³•éƒ½åŠ äº†trace tagï¼Œæ˜¯ä¸æ˜¯å°±æ˜¯ä¸ºäº†å®ç°traceview ++ ï¼Ÿä¸ºä»€ä¹ˆåæœŸåˆä¸ç”¨äº†ï¼Ÿ <br></div>
                            <span class="time">2018-12-13 09:21</span>
                            
                        </div>
                    </li>
                    


                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>