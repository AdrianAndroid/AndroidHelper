<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <style type="text/css">

#watermark {

  position: relative;
  overflow: hidden;
}

#watermark .x {
  position: absolute;
  top: 800;
  left: 400;
  color: #3300ff;
  font-size: 50px;
  pointer-events: none;
  opacity:0.3;
  filter:Alpha(opacity=50);
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
}
    </style>


    <style type="text/css">
 html{color:#333;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility;font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-variant:normal}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.typo a{border-bottom:1px solid #1abc9c}.typo a:hover{border-bottom-color:#555;color:#555}.typo a:hover,a,ins{text-decoration:none}.typo-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,Courier New,monospace}pre{background:hsla(0,0%,97%,.7);border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.typo-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.typo-dl,.typo-form,.typo-hr,.typo-ol,.typo-p,.typo-pre,.typo-table,.typo-ul,.typo dl,.typo form,.typo hr,.typo ol,.typo p,.typo pre,.typo table,.typo ul,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;line-height:1.35}.typo-h1,.typo-h2,.typo-h3,.typo-h4,.typo-h5,.typo-h6,.typo h1,.typo h2,.typo h3,.typo h4,.typo h5,.typo h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.typo-h1,.typo h1{font-size:2em}.typo-h2,.typo h2{font-size:1.8em}.typo-h3,.typo h3{font-size:1.6em}.typo-h4,.typo h4{font-size:1.4em}.typo-h5,.typo-h6,.typo h5,.typo h6{font-size:1.2em}.typo-ul,.typo ul{margin-left:1.3em;list-style:disc}.typo-ol,.typo ol{list-style:decimal;margin-left:1.9em}.typo-ol ol,.typo-ol ul,.typo-ul ol,.typo-ul ul,.typo li ol,.typo li ul{margin-bottom:.8em;margin-left:2em}.typo-ol ul,.typo-ul ul,.typo li ul{list-style:circle}.typo-table td,.typo-table th,.typo table caption,.typo table td,.typo table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.typo-table th,.typo table th{background:#fbfbfb}.typo-table thead th,.typo table thead th{background:hsla(0,0%,95%,.7)}.typo table caption{border-bottom:none}.typo-input,.typo-textarea{-webkit-appearance:none;border-radius:0}.typo-em,.typo em,caption,legend{color:#000;font-weight:inherit}.typo-em{position:relative}.typo-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"}.typo img{max-width:100%}.common-content{font-weight:400;color:#353535;line-height:1.75rem;white-space:normal;word-break:normal;font-size:1rem}.common-content img{display:block;max-width:100%;background-color:#eee}.common-content audio,.common-content video{width:100%;background-color:#eee}.common-content center,.common-content font{margin-top:1rem;display:inline-block}.common-content center{width:100%}.common-content pre{margin-top:1rem;padding-left:0;padding-right:0;position:relative;overflow:hidden}.common-content pre code{font-size:.8rem;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;width:100%;box-sizing:border-box;padding-left:1rem;padding-right:1rem;overflow-x:auto}.common-content hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}.common-content b,.common-content h1,.common-content h2,.common-content h3,.common-content h4,.common-content h5,.common-content strong{font-weight:700}.common-content h1,.common-content h2{font-size:1.125rem;margin-bottom:.45rem}.common-content h3,.common-content h4,.common-content h5{font-size:1rem;margin-bottom:.45rem}.common-content p{font-weight:400;color:#353535;margin-top:.15rem}.common-content .orange{color:#ff5a05}.common-content .reference{font-size:1rem;color:#888}.custom-rich-content h1{margin-top:0;font-weight:400;font-size:15.25px;border-bottom:1px solid #eee;line-height:2.8}.custom-rich-content li,.custom-rich-content p{font-size:14px;color:#888;line-height:1.6}table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}table.hljs-ln,table.hljs-ln tbody,table.hljs-ln td,table.hljs-ln tr{box-sizing:border-box}table.hljs-ln td{padding:0;border:0}table.hljs-ln td.hljs-ln-numbers{min-width:15px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;user-select:none}table.hljs-ln td.hljs-ln-code,table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;line-height:20px;vertical-align:top}table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;color:#24292e;word-wrap:normal;white-space:pre}video::-webkit-media-controls{overflow:hidden!important}video::-webkit-media-controls-enclosure{width:calc(100% + 32px);margin-left:auto}.button-cancel{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel,.button-primary{-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary{color:#fff;background-color:#ff5a05;border-radius:3px}@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot);src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.woff) format("woff"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.ttf) format("truetype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.svg#iconfont) format("svg")}@font-face{font-family:player-font;src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot);src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.woff) format("woff"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.ttf) format("truetype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.svg#player-font) format("svg")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}html{background:#fff;min-height:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{width:100%}body.fixed{overflow:hidden;position:fixed;width:100vw;height:100vh}i{font-style:normal}a{word-wrap:break-word;-webkit-tap-highlight-color:rgba(0,0,0,0)}a:hover{text-decoration:none}.fade-enter-active,.fade-leave-active{transition:opacity .3s}.fade-enter,.fade-leave-to{opacity:0}.MathJax,.MathJax_CHTML,.MathJax_MathContainer,.MathJax_MathML,.MathJax_PHTML,.MathJax_PlainSource,.MathJax_SVG{outline:0}.ios-app-switch .js-audit{display:none}._loading_wrap_{position:fixed;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}._loading_div_class_,._loading_wrap_{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}._loading_div_class_{word-wrap:break-word;padding:.5rem .75rem;text-align:center;z-index:9999;font-size:.6rem;max-width:60%;color:#fff;border-radius:.25rem;-ms-flex-direction:column;flex-direction:column}._loading_div_class_ .message{color:#353535;font-size:16px;line-height:3}.spinner{animation:circle-rotator 1.4s linear infinite}.spinner *{line-height:0;box-sizing:border-box}@keyframes circle-rotator{0%{transform:rotate(0deg)}to{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:circle-dash 1.4s ease-in-out infinite,circle-colors 5.6s ease-in-out infinite}@keyframes circle-colors{0%{stroke:#ff5a05}to{stroke:#ff5a05}}@keyframes circle-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.confirm-box-wrapper,.confirm-box-wrapper .mask{position:absolute;top:0;left:0;right:0;bottom:0}.confirm-box-wrapper .mask{background:rgba(0,0,0,.6)}.confirm-box-wrapper .confirm-box{position:fixed;top:50%;left:50%;width:267px;background:#fff;transform:translate(-50%,-50%);border-radius:7px}.confirm-box-wrapper .confirm-box .head{margin:0 18px;font-size:18px;text-align:center;line-height:65px;border-bottom:1px solid #d9d9d9}.confirm-box-wrapper .confirm-box .body{padding:18px;padding-bottom:0;color:#353535;font-size:12.5px;max-height:150px;overflow:auto}.confirm-box-wrapper .confirm-box .foot{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:18px}.confirm-box-wrapper .confirm-box .foot .button-cancel{border:1px solid #d9d9d9}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}




    </style>
    <style type="text/css">
        .button-cancel[data-v-87ffcada]{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel[data-v-87ffcada],.button-primary[data-v-87ffcada]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary[data-v-87ffcada]{color:#fff;background-color:#ff5a05;border-radius:3px}.pd[data-v-87ffcada]{padding-left:1.375rem;padding-right:1.375rem}.article[data-v-87ffcada]{max-width:70rem;margin:0 auto}.article .article-unavailable[data-v-87ffcada]{color:#fa8919;font-size:15px;font-weight:600;line-height:24px;border-radius:5px;padding:12px;background-color:#f6f7fb;margin-top:20px}.article .article-unavailable .iconfont[data-v-87ffcada]{font-size:12px}.article .main[data-v-87ffcada]{padding:1.25rem 0;margin-bottom:52px}.article-title[data-v-87ffcada]{color:#353535;font-weight:400;line-height:1.65rem;font-size:1.34375rem}.article-info[data-v-87ffcada]{color:#888;font-size:.9375rem;margin-top:1.0625rem}.article-content[data-v-87ffcada]{margin-top:1.0625rem}.article-content.android video[data-v-87ffcada]::-webkit-media-controls-fullscreen-button{display:none}.copyright[data-v-87ffcada]{color:#b2b2b2;padding-bottom:20px;margin-top:20px;font-size:13px}.audio-player[data-v-87ffcada]{width:100%;margin:20px 0}.to-comment[data-v-87ffcada]{overflow:hidden;padding-top:10px;margin-bottom:-30px}.to-comment a.button-primary[data-v-87ffcada]{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}.article-comments[data-v-87ffcada]{margin-top:2rem}.article-comments h2[data-v-87ffcada]{text-align:center;color:#888;position:relative;z-index:1;margin-bottom:1rem}.article-comments h2[data-v-87ffcada]:before{border-top:1px dotted #888;content:"";position:absolute;top:56%;left:0;width:100%;z-index:-1}.article-comments h2 span[data-v-87ffcada]{font-size:15.25px;font-weight:400;padding:0 1rem;background:#fff;display:inline-block}.article-sub-bottom[data-v-87ffcada]{z-index:10;cursor:pointer}.switch-btns[data-v-87ffcada]{height:76px;cursor:pointer;padding-top:24px;padding-bottom:24px;border-bottom:10px solid #f6f7fb;position:relative}.switch-btns[data-v-87ffcada]:before{content:" ";height:1px;background:#e8e8e8;position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:1.375rem;right:1.375rem}.switch-btns .btn[data-v-87ffcada]{height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.switch-btns .btn .tag[data-v-87ffcada]{-webkit-box-flex:0;-ms-flex:0 0 62px;flex:0 0 62px;text-align:center;color:#888;font-size:14px;border-radius:10px;height:22px;line-height:22px;background:#f6f7fb;font-weight:400}.switch-btns .btn .txt[data-v-87ffcada]{margin-left:10px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#888;font-size:15px;height:22px;line-height:22px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400}@media (max-width:769px){.article .breadcrumb[data-v-87ffcada]{padding-top:10px;padding-bottom:10px}}





    </style>

    <style type="text/css">
        .comment-item{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:1rem}.comment-item a{border-bottom:none}.comment-item .avatar{width:2.625rem;height:2.625rem;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.comment-item .info{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.comment-item .info .hd{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .username{color:#888;font-size:15.25px;font-weight:400;line-height:1.2}.comment-item .info .hd .control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .control .btn-share{color:#888;font-size:.75rem;margin-right:1rem}.comment-item .info .hd .control .btn-praise{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.comment-item .info .hd .control .btn-praise i{color:#888;display:inline-block;font-size:.75rem;margin-right:.3rem;margin-top:-.01rem}.comment-item .info .hd .control .btn-praise i.on,.comment-item .info .hd .control .btn-praise span{color:#ff5a05}.comment-item .info .bd{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6}.comment-item .info .time{color:#888;font-size:9px;line-height:1}.comment-item .info .reply .reply-hd{font-size:15.25px}.comment-item .info .reply .reply-hd span{margin-left:-12px;color:#888;font-weight:400}.comment-item .info .reply .reply-hd i{color:#ff5a05;font-size:15.25px}.comment-item .info .reply .reply-content{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all}.comment-item .info .reply .reply-time{color:#888;font-size:9px}




    </style>
</head>
<body>
<div id="app">


    <div data-v-87ffcada="" class="article" id="watermark">
        <p class="x">æ›´å¤šè¯¾ç¨‹è¯·åŠ QQ1046877154ï¼Œå¾®ä¿¡loveu_110è·å–</p>
        <div data-v-87ffcada="" class="main main-app">
            <h1 data-v-87ffcada="" class="article-title pd">
                Nativeä¸‹å¦‚ä½•è·å–è°ƒç”¨æ ˆ
            </h1>
            <div data-v-87ffcada="" class="article-content typo common-content pd"><img data-v-87ffcada=""
                                                                                        src="https://static001.geekbang.org/resource/image/c2/c3/c26461ef349540b11a872364c0fc33c3.jpg">


                <div data-v-87ffcada="" id="article-content" class="">
                    <div class="text">
                        <p>ä½ å¥½ï¼Œæˆ‘æ˜¯simsunï¼Œæ›¾åœ¨å¾®ä¿¡ä»äº‹Androidå¼€å‘ï¼Œä¹Ÿæ˜¯å¼€æºçˆ±å¥½è€…ã€Rustè¯­è¨€â€œé“ç²‰â€ã€‚åº”ç»æ–‡é‚€è¯·ï¼Œå¾ˆé«˜å…´å¯ä»¥åœ¨â€œé«˜æ‰‹è¯¾â€é‡Œå’Œä½ åˆ†äº«ä¸€äº›ç¼–è¯‘æ–¹é¢çš„åº•å±‚çŸ¥è¯†ã€‚</p><p>å½“æˆ‘ä»¬åœ¨è°ƒè¯•Nativeå´©æºƒæˆ–è€…åœ¨åšprofilingçš„æ—¶å€™æ˜¯ååˆ†ä¾èµ–backtraceçš„ï¼Œé«˜è´¨é‡çš„backtraceå¯ä»¥å¤§å¤§å‡å°‘æˆ‘ä»¬ä¿®å¤å´©æºƒçš„æ—¶é—´ã€‚ä½†ä½ æ˜¯å¦äº†è§£ç³»ç»Ÿæ˜¯å¦‚ä½•ç”Ÿæˆbacktraceçš„å‘¢ï¼Ÿä»Šå¤©æˆ‘ä»¬å°±æ¥æ¢ç´¢ä¸€ä¸‹backtraceèƒŒåçš„æ•…äº‹ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¸¸è§çš„Nativeå´©æºƒã€‚é€šå¸¸å´©æºƒæœ¬èº«å¹¶æ²¡æœ‰ä»»ä½•backtraceä¿¡æ¯ï¼Œå¯ä»¥ç›´æ¥è·å¾—çš„å°±æ˜¯å½“å‰å¯„å­˜å™¨çš„å€¼ï¼Œä½†æ˜¾ç„¶backtraceæ‰æ˜¯èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ä¿®å¤Bugçš„å…³é”®ã€‚</p><pre><code>pid: 4637, tid: 4637, name: crasher  &gt;&gt;&gt; crasher &lt;&lt;&lt;
signal 6 (SIGABRT), code -6 (SI_TKILL), fault addr --------
Abort message: 'some_file.c:123: some_function: assertion &quot;false&quot; failed'
    r0  00000000  r1  0000121d  r2  00000006  r3  00000008
    r4  0000121d  r5  0000121d  r6  ffb44a1c  r7  0000010c
    r8  00000000  r9  00000000  r10 00000000  r11 00000000
    ip  ffb44c20  sp  ffb44a08  lr  eace2b0b  pc  eace2b16
backtrace:
    #00 pc 0001cb16  /system/lib/libc.so (abort+57)
    #01 pc 0001cd8f  /system/lib/libc.so (__assert2+22)
    #02 pc 00001531  /system/bin/crasher (do_action+764)
    #03 pc 00002301  /system/bin/crasher (main+68)
    #04 pc 0008a809  /system/lib/libc.so (__libc_init+48)
    #05 pc 00001097  /system/bin/crasher (_start_main+38)
</code></pre><p>åœ¨é˜…è¯»åé¢çš„å†…å®¹ä¹‹å‰ï¼Œä½ å¯ä»¥å…ˆç»™è‡ªå·±2åˆ†é’Ÿæ—¶é—´ï¼Œæ€è€ƒä¸€ä¸‹ç³»ç»Ÿæ˜¯å¦‚ä½•ç”Ÿæˆbacktraceçš„å‘¢ï¼Ÿæˆ‘ä»¬é€šå¸¸æŠŠç”Ÿæˆbacktraceçš„è¿‡ç¨‹å«ä½œunwindï¼Œunwindçœ‹ä¼¼å’Œæˆ‘ä»¬å¹³æ—¶å¼€å‘å¹¶æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œä½†å…¶å®å¾ˆå¤šåŠŸèƒ½éƒ½æ˜¯ä¾èµ–unwindçš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ä½ è¦ç»˜åˆ¶ç«ç„°å›¾æˆ–è€…æ˜¯åœ¨å´©æºƒå‘ç”Ÿæ—¶å¾—åˆ°backtraceï¼Œéƒ½éœ€è¦ä¾èµ–unwindã€‚</p><h2>ä¹¦æœ¬ä¸­çš„unwind</h2><p><strong>1. å‡½æ•°è°ƒç”¨è¿‡ç¨‹</strong></p><p>å¦‚æœä½ åœ¨å¤§å­¦æ—¶æœŸä¿®è¿‡æ±‡ç¼–åŸç†è¿™é—¨è¯¾ç¨‹ï¼Œç›¸ä¿¡ä½ ä¼šå¯¹ä¸‹é¢çš„å†…å®¹è¿˜æœ‰å°è±¡ã€‚ä¸‹å›¾å°±æ˜¯ä¸€ä¸ªéå¸¸æ ‡å‡†çš„å‡½æ•°è°ƒç”¨çš„è¿‡ç¨‹ã€‚</p><!-- [[[read_end]]] --><p><img src="https://static001.geekbang.org/resource/image/09/2a/09cd560f823de783e22af03a5f837f2a.png" alt=""></p><ul>
<li>
<p>é¦–å…ˆå‡è®¾æˆ‘ä»¬å¤„äºå‡½æ•°main()å¹¶å‡†å¤‡è°ƒç”¨å‡½æ•°foo()ï¼Œè°ƒç”¨æ–¹ä¼šæŒ‰å€’åºå‹å…¥å‚æ•°ã€‚æ­¤æ—¶ç¬¬ä¸€ä¸ªå‚æ•°ä¼šåœ¨è°ƒç”¨æ ˆæ ˆé¡¶ã€‚</p>
</li>
<li>
<p>è°ƒç”¨invoke foo()ä¼ªæŒ‡ä»¤ï¼Œå‹å…¥å½“å‰å¯„å­˜å™¨EIPçš„å€¼åˆ°æ ˆï¼Œç„¶åè½½å…¥å‡½æ•°foo()çš„åœ°å€åˆ°EIPã€‚</p>
</li>
<li>
<p>æ­¤æ—¶ï¼Œç”±äºæˆ‘ä»¬å·²ç»æ›´æ”¹äº†EIPçš„å€¼ï¼ˆä¸ºfoo()çš„åœ°å€ï¼‰ï¼Œç›¸å½“äºæˆ‘ä»¬å·²ç»è¿›å…¥äº†å‡½æ•°foo()ã€‚åœ¨æ‰§è¡Œä¸€ä¸ªå‡½æ•°ä¹‹å‰ï¼Œç¼–è¯‘å™¨éƒ½ä¼šç»™æ¯ä¸ªå‡½æ•°å†™ä¸€æ®µåºè¨€ï¼ˆprologueï¼‰ï¼Œè¿™é‡Œä¼šå‹å…¥æ—§çš„EBPå€¼ï¼Œå¹¶èµ‹äºˆå½“å‰EBPå’ŒESPæ–°çš„å€¼ï¼Œä»è€Œå½¢æˆæ–°çš„ä¸€ä¸ªå‡½æ•°æ ˆã€‚</p>
</li>
<li>
<p>ä¸‹ä¸€æ­¥å°±è¡Œæ‰§è¡Œå‡½æ•°foo()æœ¬èº«çš„ä»£ç äº†ã€‚</p>
</li>
<li>
<p>ç»“æŸæ‰§è¡Œå‡½æ•°foo() å¹¶å‡†å¤‡è¿”å›ï¼Œè¿™é‡Œç¼–è¯‘å™¨ä¹Ÿä¼šç»™æ¯ä¸ªå‡½æ•°æ’å…¥ä¸€æ®µå°¾å£°ï¼ˆepilogueï¼‰ç”¨äºæ¢å¤è°ƒç”¨æ–¹çš„ESPå’ŒEBPæ¥é‡å»ºä¹‹å‰å‡½æ•°çš„æ ˆå’Œæ¢å¤å¯„å­˜å™¨ã€‚</p>
</li>
<li>
<p>æ‰§è¡Œè¿”å›æŒ‡ä»¤ï¼ˆretï¼‰ï¼Œè¢«è°ƒç”¨å‡½æ•°çš„å°¾å£°ï¼ˆepilogueï¼‰å·²ç»æ¢å¤äº†EBPå’ŒESPï¼Œç„¶åæˆ‘ä»¬å¯ä»¥ä»è¢«æ¢å¤çš„æ ˆä¸­ä¾æ¬¡popå‡ºEIPã€æ‰€æœ‰çš„å‚æ•°ä»¥åŠè¢«æš‚å­˜çš„å¯„å­˜å™¨çš„å€¼ã€‚</p>
</li>
</ul><p>è¯»åˆ°è¿™é‡Œï¼Œç›¸ä¿¡å¦‚æœæ²¡æœ‰å­¦è¿‡æ±‡ç¼–åŸç†çš„åŒå­¦è‚¯å®šä¼šæœ‰ä¸€äº›æ‡µï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹ä¸Šé¢æåˆ°çš„å¯„å­˜å™¨ç¼©å†™çš„å…·ä½“å«ä¹‰ï¼Œä¸Šè¿°å‘½åå‡ä½¿ç”¨äº†x86çš„å‘½åæ–¹å¼ã€‚è®²è¿™äº›æ˜¯å¸Œæœ›ä½ å¯¹å‡½æ•°è°ƒç”¨æœ‰ä¸€ä¸ªåˆæ­¥çš„ç†è§£ï¼Œå…¶ä¸­æœ‰å¾ˆå¤šç»†èŠ‚åœ¨ä¸åŒä½“ç³»ç»“æ„ã€ä¸åŒç¼–è¯‘å™¨ä¸Šçš„è¡Œä¸ºéƒ½æœ‰æ‰€åŒºåˆ«ï¼Œæ‰€ä»¥è¯·ä½ æ”¾æ¾å¿ƒæƒ…ï¼Œè·Ÿæˆ‘ä¸€èµ·ç»§ç»­å‘åçœ‹ã€‚</p><blockquote>
<p>EBPï¼šåŸºå€æŒ‡é’ˆå¯„å­˜å™¨ï¼ŒæŒ‡å‘æ ˆå¸§çš„åº•éƒ¨ã€‚<br>
åœ¨ARMä½“ç³»ç»“æ„ä¸­ï¼ŒR11ï¼ˆARM codeï¼‰æˆ–è€…R7ï¼ˆThumb codeï¼‰èµ·åˆ°äº†ç±»ä¼¼çš„ä½œç”¨ã€‚åœ¨ARM64ä¸­ï¼Œæ­¤å¯„å­˜å™¨ä¸ºX29ã€‚<br>
ESPï¼šæ ˆæŒ‡é’ˆå¯„å­˜å™¨ï¼ŒæŒ‡å‘æ ˆå¸§çš„æ ˆé¡¶ ï¼Œ åœ¨ARMä¸‹å¯„å­˜å™¨ä¸ºR13ã€‚<br>
EIPï¼šæŒ‡ä»¤å¯„å­˜å™¨ï¼Œå­˜å‚¨çš„æ˜¯CPUä¸‹æ¬¡è¦æ‰§è¡Œçš„æŒ‡ä»¤çš„åœ°å€ï¼ŒARMä¸‹ä¸ºPCï¼Œå¯„å­˜å™¨ä¸ºR15ã€‚</p>
</blockquote><p><strong>2. æ¢å¤è°ƒç”¨å¸§</strong></p><p>å¦‚æœæˆ‘ä»¬æŠŠä¸Šè¿°è¿‡ç¨‹ç¼©å°ï¼Œç«™åœ¨æ›´é«˜ä¸€å±‚è§†è§’å»çœ‹ï¼Œæ‰€æœ‰çš„å‡½æ•°è°ƒç”¨æ ˆéƒ½ä¼šå½¢æˆè°ƒç”¨å¸§ï¼ˆstack frameï¼‰ï¼Œæ¯ä¸€ä¸ªå¸§ä¸­éƒ½ä¿å­˜äº†è¶³å¤Ÿçš„ä¿¡æ¯å¯ä»¥æ¢å¤è°ƒç”¨å‡½æ•°çš„æ ˆå¸§ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/01/45/017b900048f1be70ec870ea0750d2145.png" alt=""></p><p>æˆ‘ä»¬è¿™é‡Œå¿½ç•¥æ‰å…¶ä»–ä¸ç›¸å…³çš„ç»†èŠ‚ï¼Œé‡ç‚¹å…³æ³¨ä¸€ä¸‹EBPã€ESPå’ŒEIPã€‚ä½ å¯ä»¥çœ‹åˆ°EBPå’ŒESPåˆ†åˆ«æŒ‡å‘æ‰§è¡Œå‡½æ•°æ ˆçš„æ ˆåº•å’Œæ ˆé¡¶ã€‚æ¯æ¬¡å‡½æ•°è°ƒç”¨éƒ½ä¼šä¿å­˜EBPå’ŒEIPç”¨äºåœ¨è¿”å›æ—¶æ¢å¤å‡½æ•°æ ˆå¸§ã€‚è¿™é‡Œæ‰€æœ‰è¢«ä¿å­˜çš„EBPå°±åƒä¸€ä¸ªé“¾è¡¨æŒ‡é’ˆï¼Œä¸æ–­åœ°æŒ‡å‘è°ƒç”¨å‡½æ•°çš„EBPã€‚ è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ­¤ä¸ºçº¿ç´¢ï¼Œååˆ†ä¼˜é›…åœ°æ¢å¤æ•´ä¸ªè°ƒç”¨æ ˆã€‚</p><p><img src="https://static001.geekbang.org/resource/image/7a/f8/7ab1f6e1774731ec96b9c68843a73df8.png" alt=""></p><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„ä¼ªä»£ç æ¥æ¢å¤è°ƒç”¨æ ˆï¼š</p><pre><code>void debugger::print_backtrace() {
    auto curr_func = get_func_from_pc(get_pc());
    output_frame(curr_func);

    auto frame_pointer = get_register_value(m_pid, reg::rbp);
    auto return_address = read_mem(frame_pointer+8);

    while (dwarf::at_name(curr_func) != &quot;main&quot;) {
        curr_func = get_func_from_pc(ret_addr);
        output_frame(curr_func);
        frame_pointer = read_mem(frame_pointer);
        return_address = read_mem(frame_pointer+8);
    }
</code></pre><p>ä½†æ˜¯åœ¨ARMä½“ç³»ç»“æ„ä¸­ï¼Œå‡ºäºæ€§èƒ½çš„è€ƒè™‘ï¼Œå¤©æ‰çš„å¼€å‘è€…ä¸ºäº†èŠ‚çº¦R7/R11å¯„å­˜å™¨ï¼Œä½¿å…¶å¯ä»¥ä½œä¸ºé€šç”¨å¯„å­˜å™¨æ¥ä½¿ç”¨ï¼Œå› æ­¤æ— æ³•ä¿è¯ä¿å­˜è¶³å¤Ÿçš„ä¿¡æ¯æ¥å½¢æˆä¸Šè¿°è°ƒç”¨æ ˆçš„ï¼ˆå³ä½¿ä½ å‘ç¼–è¯‘å™¨ä¼ å…¥äº†â€œ-fno-omit-frame-pointerâ€ï¼‰ã€‚æ¯”å¦‚ä¸‹é¢ä¸¤ç§æƒ…å†µï¼ŒARMå°±ä¼šä¸éµå¾ªä¸€èˆ¬æ„ä¹‰ä¸Šçš„åºè¨€ï¼ˆprologueï¼‰ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å…·ä½“æŸ¥çœ‹<a href="https://www.cl.cam.ac.uk/~fms27/teaching/2001-02/arm-project/02-sort/apcs.txt#1018">APCS Doc</a>ã€‚</p><ul>
<li>
<p>å‡½æ•°ä¸ºå¶å‡½æ•°ï¼Œå³åœ¨å‡½æ•°ä½“å†…å†æ²¡æœ‰ä»»ä½•å‡½æ•°è°ƒç”¨ã€‚</p>
</li>
<li>
<p>å‡½æ•°ä½“éå¸¸å°ã€‚</p>
</li>
</ul><h2>Androidä¸­çš„unwind</h2><p>æˆ‘ä»¬çŸ¥é“å¤§éƒ¨åˆ†Androidæ‰‹æœºä½¿ç”¨çš„éƒ½æ˜¯ARMä½“ç³»ç»“æ„ï¼Œé‚£åœ¨Androidä¸­éœ€è¦å¦‚ä½•è¿›è¡Œunwindå‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦åˆ†ä¸¤ç§æƒ…å†µåˆ†åˆ«è®¨è®ºã€‚</p><p><strong>1. Debugç‰ˆæœ¬unwind</strong></p><p>å¦‚æœæ˜¯Debugç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡â€œ.debug_frameâ€ï¼ˆæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥äº†è§£ä¸€ä¸‹<a href="http://www.dwarfstd.org/doc/DWARF4.pdf">DWARF</a>ï¼‰æ¥å¸®åŠ©æˆ‘ä»¬è¿›è¡Œunwindã€‚è¿™ç§æ–¹æ³•ååˆ†é«˜æ•ˆä¹Ÿååˆ†å‡†ç¡®ï¼Œä½†ç¼ºç‚¹æ˜¯è°ƒè¯•ä¿¡æ¯æœ¬èº«å¾ˆå¤§ï¼Œç”šè‡³ä¼šæ¯”ç¨‹åºæ®µï¼ˆ.TEXTæ®µï¼‰æ›´å¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬æ˜¯æ— æ³•åœ¨Releaseç‰ˆæœ¬ä¸­åŒ…å«è¿™ä¸ªä¿¡æ¯çš„ã€‚</p><blockquote>
<p>DWARF æ˜¯ä¸€ç§æ ‡å‡†è°ƒè¯•ä¿¡æ¯æ ¼å¼ã€‚DWARFæœ€æ—©ä¸ELFæ–‡ä»¶æ ¼å¼ä¸€èµ·è®¾è®¡, ä½†DWARFæœ¬èº«æ˜¯ç‹¬ç«‹çš„ä¸€ç§å¯¹è±¡æ–‡ä»¶æ ¼å¼ã€‚æœ¬èº«DAWRFå’ŒELFçš„åå­—å¹¶æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼ˆä¾å„’ã€ç²¾çµï¼Œæ˜¯ä¸æ˜¯åƒé­”å…½ä¸–ç•Œçš„è§’è‰² :)ï¼‰ï¼Œåç»­ä¸ºäº†æ–¹ä¾¿å®£ä¼ ï¼Œæ‰å‘½åä¸ºDebugging With Attributed Record Formatsã€‚å¼•è‡ª<a href="https://en.wikipedia.org/wiki/DWARF#cite_note-eager-1">wiki</a></p>
</blockquote><p><strong>2. Releaseç‰ˆæœ¬unwind</strong></p><p>å¯¹äºReleaseç‰ˆæœ¬ï¼Œç³»ç»Ÿä½¿ç”¨äº†ä¸€ç§ç±»ä¼¼â€œ.debug_frameâ€çš„æ®µè½ï¼Œæ˜¯æ›´åŠ ç´§å‡‘çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç§°ä¹‹ä¸ºunwind tableï¼Œå…·ä½“æ¥è¯´åœ¨x86å’ŒARM64å¹³å°ä¸Šæ˜¯â€œ.eh_frameâ€å’Œâ€œ.eh_frame_hdrâ€ï¼Œåœ¨ARM32å¹³å°ä¸Šä¸ºâ€œ.ARM.extabâ€å’Œâ€œ.ARM.exidxâ€ã€‚</p><p>ç”±äºARM32çš„æ ‡å‡†æ—©äºDWARFçš„æ–¹æ³•ï¼Œæ‰€æœ‰ARMä½¿ç”¨äº†è‡ªå·±çš„å®ç°ï¼Œä¸è¿‡å®ƒä»¬çš„åŸç†ååˆ†æ¥è¿‘ï¼Œåç»­æˆ‘ä»¬åªè®¨è®ºâ€œ.eh_frameâ€ï¼Œå¦‚æœä½ å¯¹ARM32çš„å®ç°ç‰¹åˆ«æ„Ÿå…´è¶£ï¼Œå¯ä»¥å‚è€ƒ<a href="https://sourceware.org/binutils/docs/as/ARM-Unwinding-Tutorial.html">ARM-Unwinding-Tutorial</a>ã€‚</p><p>â€œ.eh_frame sectionâ€ä¹Ÿæ˜¯éµå¾ªDWARFçš„æ ¼å¼çš„ï¼Œä½†DWARFæœ¬èº«ååˆ†çç¢ä¹Ÿååˆ†å¤æ‚ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸æ·±å…¥è¿›å»äº†ï¼Œåªæ¶‰åŠä¸€äº›æ¯”è¾ƒæµ…æ˜¾çš„å†…å®¹ï¼Œä½ åªéœ€è¦äº†è§£DAWRFä½¿ç”¨äº†ä¸€ä¸ªè¢«ç§°ä¸ºDIï¼ˆDebugging Information Entryï¼‰çš„æ•°æ®ç»“æ„ï¼Œå»è¡¨ç¤ºæ¯ä¸ªå˜é‡ã€å˜é‡ç±»å‹å’Œå‡½æ•°ç­‰åœ¨debugç¨‹åºæ—¶éœ€è¦ç”¨åˆ°çš„å†…å®¹ã€‚</p><p>â€œ.eh_frameâ€ä½¿ç”¨äº†ä¸€ç§å¾ˆèªæ˜çš„æ–¹æ³•æ„æˆäº†ä¸€ä¸ªéå¸¸å¤§çš„è¡¨ï¼Œè¡¨ä¸­åŒ…å«äº†æ¯ä¸ªç¨‹åºæ®µçš„åœ°å€å¯¹åº”çš„ç›¸åº”å¯„å­˜å™¨çš„å€¼ä»¥åŠè¿”å›åœ°å€ç­‰ç›¸å…³ä¿¡æ¯ï¼Œä¸‹é¢å°±æ˜¯è¿™å¼ è¡¨çš„ç¤ºä¾‹ï¼ˆä½ å¯ä»¥ä½¿ç”¨<code>readelf --debug-dump=frames-interp</code>å»æŸ¥çœ‹ç›¸åº”çš„ä¿¡æ¯ï¼ŒReleaseç‰ˆä¸­ä¼šç²¾ç®€ä¸€äº›ä¿¡æ¯ï¼Œä½†æ‰€æœ‰å¸®åŠ©æˆ‘ä»¬unwindçš„å¯„å­˜å™¨ä¿¡æ¯éƒ½ä¼šè¢«ä¿ç•™ï¼‰ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/03/70/03aa1ebfe910222910dee2b23c7a5770.png" alt=""></p><p>â€œ.eh_frame sectionâ€è‡³å°‘åŒ…å«äº†ä¸€ä¸ªCFIï¼ˆCall Frame Informationï¼‰ã€‚æ¯ä¸ªCFIéƒ½åŒ…å«äº†ä¸¤ä¸ªæ¡ç›®ï¼šç‹¬ç«‹çš„CIEï¼ˆCommon Information Entryï¼‰å’Œè‡³å°‘ä¸€ä¸ªFDEï¼ˆFrame Description Entryï¼‰ã€‚é€šå¸¸æ¥è®²CFIéƒ½å¯¹åº”ä¸€ä¸ªå¯¹è±¡æ–‡ä»¶ï¼ŒFDEåˆ™æè¿°ä¸€ä¸ªå‡½æ•°ã€‚</p><p>â€œ<a href="https://refspecs.linuxfoundation.org/LSB_1.3.0/gLSB/gLSB/ehframehdr.html">.eh_frame_hdr</a> sectionâ€åŒ…å«äº†ä¸€ç³»åˆ—å±æ€§ï¼Œé™¤äº†ä¸€äº›åŸºç¡€çš„metaä¿¡æ¯ï¼Œè¿˜åŒ…å«äº†ä¸€åˆ—æœ‰åºä¿¡æ¯ï¼ˆåˆå§‹åœ°å€ï¼ŒæŒ‡å‘â€œ.eh_frameâ€ä¸­FDEçš„æŒ‡é’ˆï¼‰ï¼Œè¿™äº›ä¿¡æ¯æŒ‰ç…§functionæ’åºï¼Œä»è€Œå¯ä»¥ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾åŠ é€Ÿæœç´¢ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/ba/d1/ba663ea69e7a64a716e37c7f6710f4d1.png" alt=""></p><h2>æ€»ç»“</h2><p>æ€»çš„æ¥è¯´ï¼Œunwindç¬¬ä¸€ä¸ªæ ˆå¸§æ˜¯æœ€éš¾çš„ï¼Œç”±äºARMæ— æ³•ä¿è¯ä¼šå‹åŸºå€æŒ‡é’ˆå¯„å­˜å™¨ï¼ˆEBPï¼‰è¿›æ ˆï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å€ŸåŠ©ä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼ˆ.eh_frameï¼‰æ¥å¸®åŠ©æˆ‘ä»¬å¾—åˆ°ç›¸åº”çš„åŸºå€æŒ‡é’ˆå¯„å­˜å™¨çš„å€¼ã€‚å³ä½¿å¦‚æ­¤ï¼Œç”Ÿäº§ç¯å¢ƒè¿˜æ˜¯ä¼šæœ‰å„ç§æ ˆç ´åï¼Œæ‰€ä»¥è¿˜æ˜¯æœ‰è®¸å¤šå·¥ä½œéœ€è¦åšï¼Œæ¯”å¦‚ä¸åŒçš„è°ƒè¯•å™¨ï¼ˆGDBã€LLDBï¼‰æˆ–è€…breakpadéƒ½å®ç°äº†ä¸€äº›æœç´¢ç®—æ³•å»å¯»æ‰¾æ½œåœ¨çš„æ ˆå¸§ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸å±•å¼€è®¨è®ºäº†ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥é˜…ç›¸å…³ä»£ç ã€‚</p><h2>æ‰©å±•é˜…è¯»</h2><p>ä¸‹é¢ç»™ä½ ä¸€äº›å¤–éƒ¨é“¾æ¥ï¼Œä½ å¯ä»¥é˜…è¯»GCCä¸­å®ç°unwindçš„å…³é”®å‡½æ•°ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥åœ¨è°ƒè¯•å™¨ä¸­å®ç°è‡ªå·±çš„unwinderã€‚</p><ul>
<li>
<p><a href="https://gcc.gnu.org/git/gitweb.cgi?p=gcc.git;a=blob;f=libgcc/unwind.inc;h=12f62bca7335f3738fb723f00b1175493ef46345;hb=HEAD#l275">_Unwind_Backtrace</a></p>
</li>
<li>
<p><a href="https://gcc.gnu.org/git/gitweb.cgi?p=gcc.git;a=blob;f=libgcc/unwind-dw2.c;h=b262fd9f5b92e2d0ea4f0e65152927de0290fcbd;hb=HEAD#l1222">uw_frame_state_for</a></p>
</li>
<li>
<p><a href="https://gcc.gnu.org/git/gitweb.cgi?p=gcc.git;a=blob;f=libgcc/unwind-dw2.c;h=b262fd9f5b92e2d0ea4f0e65152927de0290fcbd;hb=HEAD#l1494">uw_update_context</a></p>
</li>
<li>
<p><a href="https://gcc.gnu.org/git/gitweb.cgi?p=gcc.git;a=blob;f=libgcc/unwind-dw2.c;h=b262fd9f5b92e2d0ea4f0e65152927de0290fcbd;hb=HEAD#l1376">uw_update_context_1</a></p>
</li>
</ul><p><img src="https://static001.geekbang.org/resource/image/bf/f1/bf8fdc35ddccb10b1161d8ca7eb8f8f1.jpg" alt=""></p>
                    </div>
                </div>

            </div>
            <div data-v-87ffcada="" class="article-comments pd"><h2 data-v-87ffcada=""><span
                    data-v-87ffcada="">ç²¾é€‰ç•™è¨€</span></h2>
                <ul data-v-87ffcada="">
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/14/82/6e/f552d036.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å±±é¬¼</span>
                            </div>
                            <div class="bd">æ˜¥èŠ‚ä¾ç„¶ç»§ç»­å­¦ä¹ ã€‚ä¹‹å‰è€å¸ˆè®²å´©æºƒä¼˜åŒ–çš„æ—¶å€™å°è¯•å¯¹nativeçš„å´©æºƒè¿›è¡Œäº†æ•è·ï¼Œä½¿ç”¨çš„ç³»ç»Ÿæä¾›çš„uwindå·¥å…·ï¼Œå½“æ—¶è§‰å¾—æ¯”è¾ƒéš¾å¾—åœ¨äºæ‰“å°å‡ºå¯¹åº”çš„javaå †æ ˆã€‚ç°åœ¨å¯¹uwindçš„åŸç†åˆäº†è§£äº†ä¸€ä¸‹ï¼Œä½†æ„Ÿè§‰è¿™ç¯‡æ•™ç¨‹çš„ä¿¡æ¯é‡å°‘äº†äº›ã€‚ <br></div>
                            <span class="time">2019-02-03 22:13</span>
                            
                            <div class="reply">
                                <div class="reply-hd"><span>ä½œè€…å›å¤</span></div>
                                <p class="reply-content">ğŸ‘ğŸ»ï¼Œè·å¾—javaå †æ ˆçš„æ–¹æ³•å¯ä»¥å‚è€ƒå¡é¡¿è¡¥å……ç¯‡çš„åšæ³•</p>
                                <p class="reply-time">2019-02-04 15:08</p>
                            </div>
                            
                        </div>
                    </li>
                    


                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>