<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <style type="text/css">

#watermark {

  position: relative;
  overflow: hidden;
}

#watermark .x {
  position: absolute;
  top: 800;
  left: 400;
  color: #3300ff;
  font-size: 50px;
  pointer-events: none;
  opacity:0.3;
  filter:Alpha(opacity=50);
  -webkit-transform: rotate(45deg);
  -moz-transform: rotate(45deg);
}
    </style>


    <style type="text/css">
 html{color:#333;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility;font-family:Helvetica Neue,PingFang SC,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,Helvetica,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-variant:normal}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.typo a{border-bottom:1px solid #1abc9c}.typo a:hover{border-bottom-color:#555;color:#555}.typo a:hover,a,ins{text-decoration:none}.typo-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,Courier New,monospace}pre{background:hsla(0,0%,97%,.7);border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.typo-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.typo-dl,.typo-form,.typo-hr,.typo-ol,.typo-p,.typo-pre,.typo-table,.typo-ul,.typo dl,.typo form,.typo hr,.typo ol,.typo p,.typo pre,.typo table,.typo ul,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Helvetica Neue,Verdana,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#000;line-height:1.35}.typo-h1,.typo-h2,.typo-h3,.typo-h4,.typo-h5,.typo-h6,.typo h1,.typo h2,.typo h3,.typo h4,.typo h5,.typo h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.typo-h1,.typo h1{font-size:2em}.typo-h2,.typo h2{font-size:1.8em}.typo-h3,.typo h3{font-size:1.6em}.typo-h4,.typo h4{font-size:1.4em}.typo-h5,.typo-h6,.typo h5,.typo h6{font-size:1.2em}.typo-ul,.typo ul{margin-left:1.3em;list-style:disc}.typo-ol,.typo ol{list-style:decimal;margin-left:1.9em}.typo-ol ol,.typo-ol ul,.typo-ul ol,.typo-ul ul,.typo li ol,.typo li ul{margin-bottom:.8em;margin-left:2em}.typo-ol ul,.typo-ul ul,.typo li ul{list-style:circle}.typo-table td,.typo-table th,.typo table caption,.typo table td,.typo table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.typo-table th,.typo table th{background:#fbfbfb}.typo-table thead th,.typo table thead th{background:hsla(0,0%,95%,.7)}.typo table caption{border-bottom:none}.typo-input,.typo-textarea{-webkit-appearance:none;border-radius:0}.typo-em,.typo em,caption,legend{color:#000;font-weight:inherit}.typo-em{position:relative}.typo-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"}.typo img{max-width:100%}.common-content{font-weight:400;color:#353535;line-height:1.75rem;white-space:normal;word-break:normal;font-size:1rem}.common-content img{display:block;max-width:100%;background-color:#eee}.common-content audio,.common-content video{width:100%;background-color:#eee}.common-content center,.common-content font{margin-top:1rem;display:inline-block}.common-content center{width:100%}.common-content pre{margin-top:1rem;padding-left:0;padding-right:0;position:relative;overflow:hidden}.common-content pre code{font-size:.8rem;font-family:Consolas,Liberation Mono,Menlo,monospace,Courier;display:block;width:100%;box-sizing:border-box;padding-left:1rem;padding-right:1rem;overflow-x:auto}.common-content hr{border:none;margin-top:1.5rem;margin-bottom:1.5rem;border-top:1px solid #f5f5f5;height:1px;background:none}.common-content b,.common-content h1,.common-content h2,.common-content h3,.common-content h4,.common-content h5,.common-content strong{font-weight:700}.common-content h1,.common-content h2{font-size:1.125rem;margin-bottom:.45rem}.common-content h3,.common-content h4,.common-content h5{font-size:1rem;margin-bottom:.45rem}.common-content p{font-weight:400;color:#353535;margin-top:.15rem}.common-content .orange{color:#ff5a05}.common-content .reference{font-size:1rem;color:#888}.custom-rich-content h1{margin-top:0;font-weight:400;font-size:15.25px;border-bottom:1px solid #eee;line-height:2.8}.custom-rich-content li,.custom-rich-content p{font-size:14px;color:#888;line-height:1.6}table.hljs-ln{margin-bottom:0;border-spacing:0;border-collapse:collapse}table.hljs-ln,table.hljs-ln tbody,table.hljs-ln td,table.hljs-ln tr{box-sizing:border-box}table.hljs-ln td{padding:0;border:0}table.hljs-ln td.hljs-ln-numbers{min-width:15px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;cursor:pointer;user-select:none}table.hljs-ln td.hljs-ln-code,table.hljs-ln td.hljs-ln-numbers{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px;line-height:20px;vertical-align:top}table.hljs-ln td.hljs-ln-code{position:relative;padding-right:10px;padding-left:10px;overflow:visible;color:#24292e;word-wrap:normal;white-space:pre}video::-webkit-media-controls{overflow:hidden!important}video::-webkit-media-controls-enclosure{width:calc(100% + 32px);margin-left:auto}.button-cancel{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel,.button-primary{-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary{color:#fff;background-color:#ff5a05;border-radius:3px}@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot);src:url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.woff) format("woff"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.ttf) format("truetype"),url(//at.alicdn.com/t/font_372689_bwwwtosxtzp.svg#iconfont) format("svg")}@font-face{font-family:player-font;src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot);src:url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.woff) format("woff"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.ttf) format("truetype"),url(//at.alicdn.com/t/font_509397_1cyjv4o90qiod2t9.svg#player-font) format("svg")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale}html{background:#fff;min-height:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body{width:100%}body.fixed{overflow:hidden;position:fixed;width:100vw;height:100vh}i{font-style:normal}a{word-wrap:break-word;-webkit-tap-highlight-color:rgba(0,0,0,0)}a:hover{text-decoration:none}.fade-enter-active,.fade-leave-active{transition:opacity .3s}.fade-enter,.fade-leave-to{opacity:0}.MathJax,.MathJax_CHTML,.MathJax_MathContainer,.MathJax_MathML,.MathJax_PHTML,.MathJax_PlainSource,.MathJax_SVG{outline:0}.ios-app-switch .js-audit{display:none}._loading_wrap_{position:fixed;width:100vw;height:100vh;top:50%;left:50%;transform:translate(-50%,-50%);z-index:999}._loading_div_class_,._loading_wrap_{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}._loading_div_class_{word-wrap:break-word;padding:.5rem .75rem;text-align:center;z-index:9999;font-size:.6rem;max-width:60%;color:#fff;border-radius:.25rem;-ms-flex-direction:column;flex-direction:column}._loading_div_class_ .message{color:#353535;font-size:16px;line-height:3}.spinner{animation:circle-rotator 1.4s linear infinite}.spinner *{line-height:0;box-sizing:border-box}@keyframes circle-rotator{0%{transform:rotate(0deg)}to{transform:rotate(270deg)}}.path{stroke-dasharray:187;stroke-dashoffset:0;transform-origin:center;animation:circle-dash 1.4s ease-in-out infinite,circle-colors 5.6s ease-in-out infinite}@keyframes circle-colors{0%{stroke:#ff5a05}to{stroke:#ff5a05}}@keyframes circle-dash{0%{stroke-dashoffset:187}50%{stroke-dashoffset:46.75;transform:rotate(135deg)}to{stroke-dashoffset:187;transform:rotate(450deg)}}.confirm-box-wrapper,.confirm-box-wrapper .mask{position:absolute;top:0;left:0;right:0;bottom:0}.confirm-box-wrapper .mask{background:rgba(0,0,0,.6)}.confirm-box-wrapper .confirm-box{position:fixed;top:50%;left:50%;width:267px;background:#fff;transform:translate(-50%,-50%);border-radius:7px}.confirm-box-wrapper .confirm-box .head{margin:0 18px;font-size:18px;text-align:center;line-height:65px;border-bottom:1px solid #d9d9d9}.confirm-box-wrapper .confirm-box .body{padding:18px;padding-bottom:0;color:#353535;font-size:12.5px;max-height:150px;overflow:auto}.confirm-box-wrapper .confirm-box .foot{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding:18px}.confirm-box-wrapper .confirm-box .foot .button-cancel{border:1px solid #d9d9d9}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}




    </style>
    <style type="text/css">
        .button-cancel[data-v-87ffcada]{color:#888;border:1px solid #888;border-radius:3px;margin-right:12px}.button-cancel[data-v-87ffcada],.button-primary[data-v-87ffcada]{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;height:35px;display:inline-block;font-size:15px;text-align:center;line-height:36px}.button-primary[data-v-87ffcada]{color:#fff;background-color:#ff5a05;border-radius:3px}.pd[data-v-87ffcada]{padding-left:1.375rem;padding-right:1.375rem}.article[data-v-87ffcada]{max-width:70rem;margin:0 auto}.article .article-unavailable[data-v-87ffcada]{color:#fa8919;font-size:15px;font-weight:600;line-height:24px;border-radius:5px;padding:12px;background-color:#f6f7fb;margin-top:20px}.article .article-unavailable .iconfont[data-v-87ffcada]{font-size:12px}.article .main[data-v-87ffcada]{padding:1.25rem 0;margin-bottom:52px}.article-title[data-v-87ffcada]{color:#353535;font-weight:400;line-height:1.65rem;font-size:1.34375rem}.article-info[data-v-87ffcada]{color:#888;font-size:.9375rem;margin-top:1.0625rem}.article-content[data-v-87ffcada]{margin-top:1.0625rem}.article-content.android video[data-v-87ffcada]::-webkit-media-controls-fullscreen-button{display:none}.copyright[data-v-87ffcada]{color:#b2b2b2;padding-bottom:20px;margin-top:20px;font-size:13px}.audio-player[data-v-87ffcada]{width:100%;margin:20px 0}.to-comment[data-v-87ffcada]{overflow:hidden;padding-top:10px;margin-bottom:-30px}.to-comment a.button-primary[data-v-87ffcada]{float:right;height:20px;font-size:12px;line-height:20px;padding:4px 8px;cursor:pointer}.article-comments[data-v-87ffcada]{margin-top:2rem}.article-comments h2[data-v-87ffcada]{text-align:center;color:#888;position:relative;z-index:1;margin-bottom:1rem}.article-comments h2[data-v-87ffcada]:before{border-top:1px dotted #888;content:"";position:absolute;top:56%;left:0;width:100%;z-index:-1}.article-comments h2 span[data-v-87ffcada]{font-size:15.25px;font-weight:400;padding:0 1rem;background:#fff;display:inline-block}.article-sub-bottom[data-v-87ffcada]{z-index:10;cursor:pointer}.switch-btns[data-v-87ffcada]{height:76px;cursor:pointer;padding-top:24px;padding-bottom:24px;border-bottom:10px solid #f6f7fb;position:relative}.switch-btns[data-v-87ffcada]:before{content:" ";height:1px;background:#e8e8e8;position:absolute;top:0;left:0;-webkit-box-sizing:border-box;box-sizing:border-box;left:1.375rem;right:1.375rem}.switch-btns .btn[data-v-87ffcada]{height:38px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.switch-btns .btn .tag[data-v-87ffcada]{-webkit-box-flex:0;-ms-flex:0 0 62px;flex:0 0 62px;text-align:center;color:#888;font-size:14px;border-radius:10px;height:22px;line-height:22px;background:#f6f7fb;font-weight:400}.switch-btns .btn .txt[data-v-87ffcada]{margin-left:10px;-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;color:#888;font-size:15px;height:22px;line-height:22px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:400}@media (max-width:769px){.article .breadcrumb[data-v-87ffcada]{padding-top:10px;padding-bottom:10px}}





    </style>

    <style type="text/css">
        .comment-item{list-style-position:inside;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:1rem}.comment-item a{border-bottom:none}.comment-item .avatar{width:2.625rem;height:2.625rem;-ms-flex-negative:0;flex-shrink:0;border-radius:50%}.comment-item .info{margin-left:.5rem;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}.comment-item .info .hd{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .username{color:#888;font-size:15.25px;font-weight:400;line-height:1.2}.comment-item .info .hd .control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.comment-item .info .hd .control .btn-share{color:#888;font-size:.75rem;margin-right:1rem}.comment-item .info .hd .control .btn-praise{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:15.25px;text-decoration:none}.comment-item .info .hd .control .btn-praise i{color:#888;display:inline-block;font-size:.75rem;margin-right:.3rem;margin-top:-.01rem}.comment-item .info .hd .control .btn-praise i.on,.comment-item .info .hd .control .btn-praise span{color:#ff5a05}.comment-item .info .bd{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6}.comment-item .info .time{color:#888;font-size:9px;line-height:1}.comment-item .info .reply .reply-hd{font-size:15.25px}.comment-item .info .reply .reply-hd span{margin-left:-12px;color:#888;font-weight:400}.comment-item .info .reply .reply-hd i{color:#ff5a05;font-size:15.25px}.comment-item .info .reply .reply-content{color:#353535;font-size:15.25px;font-weight:400;white-space:normal;word-break:break-all}.comment-item .info .reply .reply-time{color:#888;font-size:9px}




    </style>
</head>
<body>
<div id="app">


    <div data-v-87ffcada="" class="article" id="watermark">
        <p class="x">æ›´å¤šè¯¾ç¨‹è¯·åŠ QQ1046877154ï¼Œå¾®ä¿¡loveu_110è·å–</p>
        <div data-v-87ffcada="" class="main main-app">
            <h1 data-v-87ffcada="" class="article-title pd">
                18è®²è€—ç”µä¼˜åŒ–ï¼ˆä¸Šï¼‰ï¼šä»ç”µé‡ä¼˜åŒ–çš„æ¼”è¿›çœ‹è€—ç”µåˆ†æ
            </h1>
            <div data-v-87ffcada="" class="article-content typo common-content pd"><img data-v-87ffcada=""
                                                                                        src="https://static001.geekbang.org/resource/image/9e/d5/9eb336f2f9493aa4a7fd65c98069acd5.jpg">


                <div data-v-87ffcada="" id="article-content" class="">
                    <div class="text">
                        <p>æ›¾ç»æœ‰ä¸€å¥ç¬‘è¯è¯´çš„æ˜¯â€œç”¨Androidæ‰‹æœºçš„ç”·äººä¸€å®šæ˜¯ä¸ªå¥½ç”·äººï¼Œå› ä¸ºä»–æ¯å¤©å¿…é¡»å›å®¶å……ç”µï¼Œæœ‰æ—¶å€™è¿˜å¾—1å¤©2æ¬¡â€ã€‚</p><p>æˆ‘ä»¬ç°åœ¨å·¥ä½œå’Œç”Ÿæ´»éƒ½ç¦»ä¸å¼€æ‰‹æœºï¼Œä½†æ˜¯å´å¾ˆéš¾æ‰¾åˆ°ä¸€æ¬¾å¯ä»¥å®Œå…¨ä¿¡èµ–ã€å¯ä»¥ä½¿ç”¨ä¸€æ•´å¤©çš„æ‰‹æœºã€‚åœ¨åå¹´å‰çš„åŠŸèƒ½æœºæ—¶ä»£ï¼Œè¯ºåŸºäºšå¯ä»¥åšåˆ°åå‡ å¤©çš„è¶…é•¿å¾…æœºã€‚è€Œç°åœ¨çš„æ™ºèƒ½æœºæ—¶ä»£ï¼Œ7nmçš„CPUã€8GBå†…å­˜ã€512GBçš„é—ªå­˜ï¼Œç¡¬ä»¶ä¸€ç›´åœ¨é£é€Ÿå‘å±•ï¼Œä¸ºä»€ä¹ˆç”µæ± çš„å‘å±•å°±ä¸é€‚ç”¨æ‘©å°”å®šå¾‹ï¼Œç”µæ± æŠ€æœ¯ä¸€ç›´æ²¡æœ‰çªç ´æ€§çš„è¿›å±•å‘¢ï¼Ÿ</p><p>åŠŸè€—æ˜¯æ‰‹æœºå‚å•†ä¸€ç›´éƒ½éå¸¸é‡è§†çš„ï¼ŒOPPOæ›´æ˜¯ç›´æ¥ä»¥â€œå……ç”µ5åˆ†é’Ÿï¼Œé€šè¯2å°æ—¶â€ä½œä¸ºå–ç‚¹ã€‚çœç”µä¼˜åŒ–ä¹Ÿæ˜¯æ¯å¹´Google I/Oå¿…è®²çš„å†…å®¹ï¼Œé‚£ä¹ˆAndroidç³»ç»Ÿéƒ½ä¸ºçœç”µåšäº†å“ªäº›åŠªåŠ›å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æ€ä¹ˆæ ·è¡¡é‡åº”ç”¨çš„è€—ç”µå‘¢ï¼Ÿ</p><h2>è€—ç”µçš„èƒŒæ™¯çŸ¥è¯†</h2><p>å›é¡¾ä¸€ä¸‹ä¸“æ å‰é¢çš„å†…å®¹ï¼Œæˆ‘å·²ç»è®²è¿‡å†…å­˜ã€CPUã€å­˜å‚¨å’Œç½‘ç»œè¿™å‡ å—å†…å®¹äº†ã€‚LPDDR5å†…å­˜ã€7nm  CPUã€UFS  3.0é—ªå­˜ã€5GèŠ¯ç‰‡ï¼Œç¡¬ä»¶ä¸€ç›´ä»¥â€œæ›´å¿«ã€æ›´å°â€çš„ç›®æ ‡å‘å‰é£é€Ÿå‘å±•ã€‚</p><p>ä½†æ˜¯æ‰‹æœºä¸Šæœ‰ä¸€ä¸ªé‡è¦éƒ¨ä»¶å¤šå¹´æ¥éƒ½æ²¡æœ‰é©å‘½æ€§çš„çªç ´ï¼Œè¢«æˆ‘ä»¬åæ§½ä¹Ÿæœ€å¤šï¼Œé‚£å°±æ˜¯ç”µæ± ã€‚æ™ºèƒ½æ‰‹æœºçš„å‘å±•å°±åƒæœ¨æ¡¶åŸç†ä¸€æ ·ï¼Œæ‰¼ä½æ™ºèƒ½æ‰‹æœºå‘å±•å’½å–‰çš„ç»ˆç©¶è¿˜æ˜¯ç”µæ± ã€‚</p><p>ç”µæ± æŠ€æœ¯æœ‰å“ªäº›é‡è¦çš„è¯„åˆ¤æ ‡å‡†ï¼Ÿç”µæ± æŠ€æœ¯è¿™äº›å¹´ç©¶ç«Ÿåˆæœ‰å“ªäº›è¿›å±•ï¼Ÿä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¥èŠèŠæ‰‹æœºç”µæ± çš„çŸ¥è¯†ã€‚</p><!-- [[[read_end]]] --><p><strong>1. ç”µæ± æŠ€æœ¯</strong></p><p>æˆ‘ä»¬å…ˆçœ‹çœ‹è‹¹æœå’Œåä¸ºè¿™ä¸¤å¤§å·¨å¤´æœ€æ–°æ——èˆ°æœºçš„è¡¨ç°ã€‚è‹¹æœçš„iPhone XS Maxå†…ç½®é”‚ç¦»å­å……ç”µç”µæ± ï¼Œç”µæ± å®¹é‡ä¸º3174mAhï¼Œ30åˆ†é’Ÿæœ€å¤šå¯å……è‡³50%ç”µé‡ã€‚</p><p>åä¸ºMate 20 Proå‡çº§åˆ°4200mAhé«˜åº¦å¤§å®¹é‡é”‚ç¦»å­ç”µæ± ï¼Œå¹¶é¦–æ¬¡æ­è½½40Wåä¸ºè¶…çº§å¿«å……æŠ€æœ¯ï¼Œ30åˆ†é’Ÿå……ç”µçº¦70%ï¼Œè¿˜æœ‰15Wé«˜åŠŸç‡æ— çº¿å¿«å……å’Œåå‘æ— çº¿å……ç”µâ€œé»‘ç§‘æŠ€â€ã€‚è€ŒMate 20 Xæ›´æ˜¯æŠŠç”µæ± å®¹é‡å‡çº§åˆ°5000mAhï¼Œè¿˜åˆ›é€ æ€§åœ°å°†çŸ³å¢¨çƒ¯æŠ€æœ¯åº”ç”¨åˆ°æ™ºèƒ½æ‰‹æœºä¸­ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/dd/1e/dd8b5d1cb842c822fafa128719ec021e.png" alt=""></p><p>ä»ä¸Šé¢ä¸¤æ¬¾æ——èˆ°æœºçš„ç”µæ± ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°æ‰‹æœºç”µæ± çš„ä¸€äº›å…³é”®æŒ‡æ ‡ã€‚</p><ul>
<li>
<p>ç”µæ± å®¹é‡ã€‚æ›´å¤§çš„ç”µæ± å®¹é‡æ„å‘³ç€æ›´é•¿çš„ç»­èˆªæ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¢åŠ ç”µæ± çš„ä½“ç§¯æˆ–è€…å¯†åº¦æ¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœã€‚æ™ºèƒ½æ‰‹æœºçš„å¤§éƒ¨åˆ†ç©ºé—´éƒ½è´¡çŒ®ç»™ç”µæ± äº†ï¼Œä»¥åä¸ºMate 20ä¸ºä¾‹ï¼Œç”µæ± å äº†æ‰€æœ‰å†…éƒ¨ç»„ä»¶ä¸­48%çš„ç©ºé—´ï¼Œç”µæ± å®¹é‡åˆ¶çº¦äº†æ‰‹æœºè¿ˆå‘æ›´è½»ã€æ›´è–„ã€‚</p>
</li>
<li>
<p>å……ç”µæ—¶é—´ã€‚å¦‚æœç”µæ± å®¹é‡ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“çªç ´ï¼Œé‚£åªèƒ½æ›²çº¿æ•‘å›½è€ƒè™‘å¦‚ä½•ç”¨æ›´çŸ­çš„æ—¶é—´æŠŠç”µæ± å……æ»¡ã€‚è¿™é‡Œå°±éœ€è¦ä¾é å¿«å……æŠ€æœ¯äº†ï¼ŒOPPOâ€œå……ç”µ5åˆ†é’Ÿï¼Œé€šè¯2å°æ—¶â€æŒ‡çš„æ˜¯<a href="https://baike.baidu.com/item/VOOC%E9%97%AA%E5%85%85/13887450?fromtitle=%E5%85%85%E7%94%B55%E5%88%86%E9%92%9F%E9%80%9A%E8%AF%9D2%E5%B0%8F%E6%97%B6&amp;fromid=18226496">VOOCé—ªå……æŠ€æœ¯</a>ã€‚å¿«å……æŠ€æœ¯æ— éæ˜¯å¢å¤§ç”µæµæˆ–è€…ç”µå‹ï¼Œç›®å‰ä¸»è¦åˆ†ä¸ºä¸¤å¤§è§£å†³æ–¹æ¡ˆï¼Œä¸€ä¸ªæ˜¯é«˜å‹ä½ç”µæµå¿«å……æ–¹æ¡ˆï¼Œå¦ä¸€ä¸ªæ˜¯ä½å‹å¤§ç”µæµå¿«å……æ–¹æ¡ˆã€‚å…³äºå¿«å……æŠ€æœ¯çš„ç›˜ç‚¹ï¼Œä½ å¯ä»¥å‚è€ƒ<a href="https://mobile.pconline.com.cn/1089/10896724.html">è¿™ç¯‡æ–‡ç« </a>ã€‚</p>
</li>
<li>
<p>å¯¿å‘½ã€‚ç”µæ± å¯¿å‘½ä¸€èˆ¬ä½¿ç”¨å……ç”µå¾ªç¯æ¬¡æ•°æ¥è¡¡é‡ï¼Œä¸€æ¬¡å……ç”µå¾ªç¯è¡¨ç¤ºå……æ»¡ç”µæ± å…¨éƒ¨ç”µé‡ï¼Œä½†æ˜¯å¹¶ä¸è¦æ±‚ä¸€æ¬¡æ€§å®Œæˆã€‚ä¾‹å¦‚åœ¨ä¹‹å‰ç”µæ± å……åˆ°äº†25%ï¼Œå¦‚æœå†å……75%ï¼Œä¸¤æ¬¡ç»„åˆåœ¨ä¸€èµ·ç®—æ˜¯ä¸€æ¬¡å……ç”µå‘¨æœŸã€‚å»å¹´è‹¹æœå› ä¸ºâ€œé™é€Ÿé—¨â€é¢ä¸´äº†å¤šèµ·è¯‰è®¼ï¼Œé€šè¿‡å¤„ç†å™¨é™é€Ÿæ¥è§£å†³ç»­èˆªä¸è¶³çš„é—®é¢˜ã€‚æ ¹æ®è‹¹æœå®˜æ–¹æ•°æ®ï¼Œ500æ¬¡å……ç”µå¾ªç¯iPhoneç”µæ± å‰©ä½™å®¹é‡ä¸ºåŸæ¥çš„80%ã€‚</p>
</li>
<li>
<p>å®‰å…¨æ€§ã€‚æ‰‹æœºä½œä¸ºç”¨æˆ·éšæ—¶æºå¸¦çš„ç‰©å“ï¼Œå®‰å…¨æ€§æ‰æ˜¯é¦–è¦è€ƒè™‘çš„å› ç´ ã€‚ç‰¹åˆ«æ˜¯ä»ä¸‰æ˜ŸNote 7çˆ†ç‚¸ä»¥æ¥ï¼Œå„å¤§æ‰‹æœºå‚å•†éƒ½åœ¨ç”µæ± å®¹é‡æ–¹é¢æ›´åŠ ä¿å®ˆã€‚æ‰€ä»¥æ— è®ºæ˜¯ç”µæ± çš„å¯†åº¦ï¼Œè¿˜æ˜¯å¿«å……æŠ€æœ¯ï¼Œæˆ‘ä»¬é¦–è¦ä¿è¯çš„éƒ½æ˜¯å®‰å…¨æ€§ã€‚</p>
</li>
</ul><p>ä»å†å²ä¹…è¿œçš„é•é“¬ã€é•æ°¢ï¼Œåˆ°ç°åœ¨æ™®éä½¿ç”¨çš„é”‚ç¦»å­ç”µæ± ï¼Œè¿˜æ˜¯è¢«ç§°ä¸ºé©å‘½æ€§æŠ€æœ¯çš„çŸ³å¢¨çƒ¯ç”µæ± ï¼Œè™½ç„¶è¾¾ä¸åˆ°æ‘©å°”å®šå¾‹ï¼Œä½†ç”µæ± æŠ€æœ¯å…¶å®ä¹Ÿåœ¨ä¸åœåœ°å‘å±•ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å‚è€ƒ<a href="http://tech.ifeng.com/a/20180319/44911215_0.shtml">ã€Šæ‰‹æœºç”µæ± æŠ€æœ¯è¿›æ­¥ã€‹</a>ã€‚</p><p>äº‹å®ä¸ŠMate 20 Xåªæ˜¯ä½¿ç”¨çŸ³å¢¨çƒ¯æŠ€æœ¯ç”¨äºæ•£çƒ­ç³»ç»Ÿï¼Œå¹¶ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„çŸ³å¢¨çƒ¯ç”µæ± ã€‚æ ¹æ®æœ€æ–°çš„ç ”ç©¶æˆæœè¡¨æ˜ï¼Œä½¿ç”¨çŸ³å¢¨çƒ¯ææ–™å¯ä»¥è®©ç”µæ± å®¹é‡å¢åŠ 45%ï¼Œå……ç”µé€Ÿåº¦å¯ä»¥åŠ å¿«5å€ï¼Œå¾ªç¯å¯¿å‘½æ›´é«˜è¾¾3500æ¬¡å·¦å³ã€‚å¯èƒ½åœ¨æœªæ¥ï¼Œ12åˆ†é’Ÿå°±èƒ½æŠŠæˆ‘ä»¬çš„æ‰‹æœºç”µæ± å……æ»¡ï¼Œå¦‚æœèƒ½å¤Ÿå®ç°æ™®åŠçš„è¯ï¼Œå°†æ˜¯ç”µæ± å‘å±•å²ä¸Šçš„ä¸€ä¸ªé‡è¦é‡Œç¨‹ç¢‘ã€‚</p><p><strong>2. ç”µé‡å’Œç¡¬ä»¶</strong></p><p>1000mAhçš„åŠŸèƒ½æœºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¥½å‡ å¤©ï¼Œä¸ºä»€ä¹ˆ5000mAhçš„æ™ºèƒ½æœºæˆ‘ä»¬éœ€è¦æ¯å¤©å……ç”µï¼Ÿè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ç°åœ¨çš„æ‰‹æœºéœ€è¦è§†é¢‘é€šè¯ï¼Œéœ€è¦æ‰“â€œç‹è€…â€â€œåƒé¸¡â€ï¼Œç¡¬ä»¶è®¾å¤‡çš„ç§ç±»å’Œæ€§èƒ½æ—©å°±ä¸å¯åŒæ—¥è€Œè¯­ã€‚</p><p>ä½†æ˜¯â€œç‹è€…â€â€œåƒé¸¡â€ç­‰åº”ç”¨ç¨‹åºä¸ä¼šç›´æ¥å»æ¶ˆè€—ç”µæ± ï¼Œè€Œæ˜¯é€šè¿‡ä½¿ç”¨ç¡¬ä»¶æ¨¡å—æ¶ˆè€—ç›¸åº”çš„ç”µèƒ½ï¼Œä¸‹å›¾æ˜¯æ‰‹æœºä¸­ä¸€äº›æ¯”è¾ƒè€—ç”µçš„ç¡¬ä»¶æ¨¡å—ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/03/e0/032e738fd9df278623a79f147e77fce0.png" alt=""></p><p>CPUã€å±å¹•ã€WiFiå’Œæ•°æ®ç½‘ç»œã€GPSä»¥åŠéŸ³è§†é¢‘é€šè¯éƒ½æ˜¯æˆ‘ä»¬æ—¥å¸¸çš„è€—ç”µå¤§æˆ·ã€‚å¦ç™½è¯´ï¼Œæ™ºèƒ½æ‰‹æœºç¡¬ä»¶çš„é£é€Ÿæå‡ï¼Œè®¸å¤šå…¶å®éƒ½æ˜¯å‚å•†å«å–çš„å™±å¤´ã€‚ç»å¤§éƒ¨åˆ†ç¡¬ä»¶å¯¹äºæˆ‘ä»¬æ¥è¯´éƒ½å·²ç»å¤„äºæ€§èƒ½è¿‡å‰©çš„çŠ¶æ€ï¼Œä½†å¤šä½™çš„æ€§èƒ½åŒæ—¶ä¹Ÿåœ¨æ¶ˆè€—ç”µé‡ã€‚</p><p>æ‰€ä»¥èµ„æºè°ƒåº¦æœºåˆ¶æ˜¯å‚å•†åŠŸè€—ä¼˜åŒ–æœ€é‡è¦çš„æ‰‹æ®µï¼Œä¾‹å¦‚åœ¨å¡é¡¿ä¼˜åŒ–çš„æ—¶å€™æˆ‘å°±è®²è¿‡ï¼ŒCPUèŠ¯ç‰‡ä¼šåˆ†å¤§å°æ ¸æ¶æ„ï¼Œä¼šçµæ´»åœ°ä¸ºä¸åŒä»»åŠ¡åˆ†é…ç›¸åº”çš„è¿ç®—èµ„æºã€‚æ‰‹æœºåŸºå¸¦ã€GPSè¿™äº›æ¨¡å—åœ¨ä¸ä½¿ç”¨æ—¶ä¹Ÿä¼šè¿›å…¥ä½åŠŸè€—æˆ–è€…ä¼‘çœ æ¨¡å¼ï¼Œè¾¾åˆ°é™ä½åŠŸè€—çš„ç›®çš„ã€‚</p><p>ç°åœ¨è¶Šæ¥è¶Šå¤šå‚å•†åˆ©ç”¨æ·±åº¦å­¦ä¹ çš„æœ¬åœ°AIæ¥ä¼˜åŒ–èµ„æºçš„è°ƒåº¦ï¼Œå¯¹GPUã€è¿è¡Œå†…å­˜ç­‰èµ„æºè¿›è¡Œåˆç†åˆ†é…ï¼Œç¡®ä¿å¯ä»¥å…¨é¢é™ä½è€—ç”µé‡ã€‚å‚å•†éœ€è¦åœ¨é«˜æ€§èƒ½è·Ÿç”µé‡ç»­èˆªä¹‹é—´å¯»æ‰¾ä¸€ä¸ªå¹³è¡¡ç‚¹ï¼Œæœ‰çš„å‚å•†å¯èƒ½å€¾å‘äºç”¨æˆ·æœ‰æ›´å¥½çš„æ€§èƒ½ï¼Œæœ‰çš„å‚å•†ä¼šå€¾å‘äºæ›´é•¿çš„ç»­èˆªã€‚</p><p>åŠŸè€—çš„ç¡®éå¸¸é‡è¦ï¼Œæˆ‘åšæ‰‹æœºé¢„è£…é¡¹ç›®æ—¶ï¼Œå‘ç°å‚å•†ä¼šå¯¹è€—ç”µæœ‰éå¸¸ä¸¥æ ¼çš„è§„å®šï¼Œè¿™ä¹Ÿè®©æˆ‘å¯¹åŠŸè€—çš„è®¤è¯†æ›´æ·±åˆ»äº†ã€‚ä½†æ˜¯ä¸ºäº†ä¸ºäº†ä¿è¯å¤´éƒ¨åº”ç”¨èƒ½æœ‰æ›´å¥½çš„ä½“éªŒï¼Œå‚å•†æ„¿æ„ç»™å®ƒä»¬åˆ†é…æ›´å¤šçš„èµ„æºã€‚æ‰€ä»¥å‡ºç°äº†é«˜é€šçš„<a href="https://developer.qualcomm.com/software/snapdragon-power-optimization-sdk/quick-start-guide">CPU Boost</a>ã€å¾®ä¿¡çš„Hardcodeä»¥åŠå„ä¸ªå‚å•†çš„åˆä½œé€šé“ã€‚</p><p>ä½†æ˜¯åè¿‡æ¥é—®ä¸€å¥ï¼Œä¸ºä»€ä¹ˆå‚å•†åªæŠŠå¾®ä¿¡å’ŒQQæ”¾åˆ°åå°ç™½åå•ï¼Œä½†æ²¡æœ‰æŠŠæ·˜å®ã€æ”¯ä»˜å®ã€æŠ–éŸ³ç­‰å…¶ä»–å¤´éƒ¨åº”ç”¨ä¹Ÿä¸€èµ·åŠ å…¥å‘¢ï¼Ÿæ ¹æ®æˆ‘çš„çŒœæµ‹ï¼Œè€—ç”µå¯èƒ½æ˜¯å…¶ä¸­ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„å› ç´ ã€‚</p><p><strong>3. ç”µé‡å’Œåº”ç”¨ç¨‹åº</strong></p><p>å„ä¸ªç¡¬ä»¶æ¨¡å—éƒ½ä¼šè€—ç”µï¼Œè€Œä¸”ä¸åŒçš„ç¡¬ä»¶è€—ç”µé‡ä¹Ÿä¸å¤ªä¸€æ ·ï¼Œé‚£æˆ‘ä»¬å¦‚ä½•è¯„ä¼°ä¸åŒåº”ç”¨ç¨‹åºçš„è€—ç”µæƒ…å†µå‘¢ï¼Ÿ</p><p><img src="https://static001.geekbang.org/resource/image/61/96/61494e773045613a4339dc56438ef896.png" alt=""></p><p>æ ¹æ®ç‰©ç†å­¦çš„çŸ¥è¯†ï¼Œç”µèƒ½çš„è®¡ç®—å…¬å¼ä¸º</p><pre><code>ç”µèƒ½ = ç”µå‹ * ç”µæµ * æ—¶é—´
</code></pre><p>å¯¹äºæ‰‹æœºæ¥è¯´ç”µå‹ä¸€èˆ¬ä¸ä¼šæ”¹å˜ï¼Œä¾‹å¦‚åä¸ºMate 20çš„æ’å®šç”µå‹æ˜¯3.82Vã€‚æ‰€ä»¥åœ¨ç”µå‹æ’å®šçš„å‰æä¸‹ï¼Œåªéœ€è¦æµ‹é‡ç”µæµå’Œæ—¶é—´å°±å¯ä»¥ç¡®å®šè€—ç”µã€‚</p><p>æœ€ç»ˆä¸åŒæ¨¡å—çš„è€—ç”µæƒ…å†µå¯ä»¥é€šè¿‡ä¸‹é¢çš„è¿™ä¸ªå…¬å¼è®¡ç®—ï¼š</p><pre><code>æ¨¡å—ç”µé‡(mAh) = æ¨¡å—ç”µæµ(mA) * æ¨¡å—è€—æ—¶(h)
</code></pre><p>æ¨¡å—è€—æ—¶æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œä½†æ˜¯æ¨¡å—ç”µæµåº”è¯¥æ€æ ·å»è·å–å‘¢ï¼ŸAndroidç³»ç»Ÿè¦æ±‚ä¸åŒçš„å‚å•†å¿…é¡»åœ¨ <code>/frameworks/base/core/res/res/xml/power_profile.xml</code> ä¸­æä¾›ç»„ä»¶çš„ç”µæºé…ç½®æ–‡ä»¶ã€‚</p><p><a href="https://android.googlesource.com/platform/frameworks/base/+/master/core/res/res/xml/power_profile.xml">power_profiler.xml</a>æ–‡ä»¶å®šä¹‰äº†ä¸åŒæ¨¡å—çš„ç”µæµæ¶ˆè€—å€¼ä»¥åŠè¯¥æ¨¡å—åœ¨ä¸€æ®µæ—¶é—´å†…å¤§æ¦‚æ¶ˆè€—çš„ç”µé‡ï¼Œä½ ä¹Ÿå¯ä»¥å‚è€ƒAndroid Developeræ–‡æ¡£<a href="https://source.android.com/devices/tech/power">ã€ŠAndroid ç”µæºé…ç½®æ–‡ä»¶ã€‹</a>ã€‚å½“ç„¶ç”µæµçš„å¤§å°å’Œæ¨¡å—çš„çŠ¶æ€ä¹Ÿæœ‰å…³ç³»ï¼Œä¾‹å¦‚å±å¹•åœ¨ä¸åŒäº®åº¦æ—¶çš„ç”µæµè‚¯å®šä¼šä¸ä¸€æ ·ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/fa/c1/fa38166961e917ea6a321f84d3d4d4c1.png" alt=""></p><p>Androidç³»ç»Ÿçš„ç”µé‡è®¡ç®—<a href="http://androidxref.com/7.0.0_r1/s?defs=PowerProfile&amp;project=frameworks">PowerProfile</a>ä¹Ÿæ˜¯é€šè¿‡è¯»å–<code>power_profile.xml</code>çš„æ•°å€¼è€Œå·²ï¼Œä¸åŒçš„å‚å•†å…·ä½“çš„æ•°å€¼éƒ½ä¸å¤ªä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•è·å–ï¼š</p><ul>
<li>
<p>ä»æ‰‹æœºä¸­å¯¼å‡º<code>/system/framework/framework-res.apk</code>æ–‡ä»¶ã€‚</p>
</li>
<li>
<p>ä½¿ç”¨åç¼–è¯‘å·¥å…·ï¼ˆå¦‚apktoolï¼‰å¯¹å¯¼å‡ºæ–‡ä»¶<code>framework-res.apk</code>è¿›è¡Œåç¼–è¯‘ã€‚</p>
</li>
<li>
<p>æŸ¥çœ‹<code>power_profile.xml</code>æ–‡ä»¶åœ¨<code>framework-res</code>åç¼–è¯‘ç›®å½•è·¯å¾„ï¼š<code>/res/xml/power_profile.xml</code>ã€‚</p>
</li>
</ul><p>å¯¹äºç³»ç»Ÿçš„ç”µé‡æ¶ˆè€—æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡dumpsys batterystatså¯¼å‡ºã€‚</p><pre><code>adb shell dumpsys batterystats &gt; battery.txt
// å„ä¸ªUidçš„æ€»è€—ç”µé‡ï¼Œè€Œä¸”æ˜¯ç²—ç•¥çš„ç”µé‡è®¡ç®—ä¼°è®¡ã€‚
Estimated power use (mAh):
    Capacity: 3450, Computed drain: 501, actual drain: 552-587
    ...
    Idle: 41.8
    Uid 0: 135 ( cpu=103 wake=31.5 wifi=0.346 )
    Uid u0a208: 17.8 ( cpu=17.7 wake=0.00460 wifi=0.0901 )
    Uid u0a65: 17.5 ( cpu=12.7 wake=4.11 wifi=0.436 gps=0.309 )
    ...

// resetç”µé‡ç»Ÿè®¡
adb shell dumpsys batterystats --reset
</code></pre><p><a href="http://androidxref.com/7.0.0_r1/xref/frameworks/base/services/core/java/com/android/server/am/BatteryStatsService.java">BatteryStatsService</a>æ˜¯å¯¹å¤–çš„ç”µé‡ç»Ÿè®¡æœåŠ¡ï¼Œä½†å…·ä½“çš„ç»Ÿè®¡å·¥ä½œæ˜¯ç”±<a href="http://androidxref.com/7.0.0_r1/xref/frameworks/base/core/java/com/android/internal/os/BatteryStatsImpl.java">BatteryStatsImpl</a>æ¥å®Œæˆçš„ï¼Œè€ŒBatteryStatsImplå†…éƒ¨ä½¿ç”¨çš„å°±æ˜¯PowerProfileã€‚BatteryStatsImplä¼šä¸ºæ¯ä¸€ä¸ªåº”ç”¨åˆ›å»ºä¸€ä¸ªUIDå®ä¾‹æ¥ç›‘æ§åº”ç”¨çš„ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µï¼Œç»Ÿè®¡çš„ç³»ç»Ÿèµ„æºåŒ…æ‹¬ä¸‹é¢å›¾é‡Œçš„å†…å®¹ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/4d/88/4d145e1d2bfd986c10def9a6afa9cf88.png" alt=""></p><p>ç”µé‡çš„ä½¿ç”¨ä¹Ÿä¼šè·Ÿç¯å¢ƒæœ‰å…³ï¼Œä¾‹å¦‚åœ¨é›¶ä¸‹ååº¦çš„å†¬å¤©ç”µé‡ä¼šæ¶ˆè€—å¾—æ›´å¿«ä¸€äº›ï¼Œç³»ç»Ÿæä¾›çš„ç”µé‡æµ‹é‡æ–¹æ³•åªæ˜¯æä¾›ä¸€ä¸ªå‚è€ƒçš„æ•°å€¼ã€‚ä¸è¿‡é€šè¿‡ä¸Šé¢çš„è¿™ä¸ªæ–¹æ³•ï¼Œ<strong>æˆ‘ä»¬å¯ä»¥æˆåŠŸæŠŠç”µé‡çš„æµ‹é‡è½¬åŒ–ä¸ºåŠŸèƒ½æ¨¡å—çš„ä½¿ç”¨æ—¶é—´æˆ–è€…æ¬¡æ•°ã€‚</strong></p><p>å‡†ç¡®çš„æµ‹é‡ç”µé‡å¹¶ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ï¼Œåœ¨<a href="https://tech.meituan.com/2018/03/11/dianping-shortvideo-battery-testcase.html">ã€Šå¤§ä¼—ç‚¹è¯„Appçš„çŸ­è§†é¢‘è€—ç”µé‡ä¼˜åŒ–å®æˆ˜ã€‹</a>ä¸€æ–‡ä¸­ï¼Œä¸ºæˆ‘ä»¬æ€»ç»“äº†ä¸‹é¢å‡ ç§ç”µé‡æµ‹è¯•çš„æ–¹æ³•ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/ae/fe/ae1b52340f802f25a09c31c13a2a22fe.png" alt=""></p><p>å½“æµ‹è¯•æˆ–è€…å…¶ä»–äººåé¦ˆè€—ç”µé—®é¢˜æ—¶ï¼Œ<a href="https://developer.android.com/studio/debug/bug-report">bug report</a>ç»“åˆ<a href="https://github.com/google/battery-historian">Battery Historian</a>æ˜¯æœ€å¥½çš„æ’æŸ¥æ–¹æ³•ã€‚</p><pre><code>//7.0å’Œ7.0ä»¥å
$ adb bugreport bugreport.zip
//6.0å’Œ6.0ä¹‹å‰:
$ adb bugreport &gt; bugreport.txt
//é€šè¿‡historianå›¾å½¢åŒ–å±•ç¤ºç»“æœ
python historian.py -a bugreport.txt &gt; battery.html
</code></pre><h2>Androidè€—ç”µçš„æ¼”è¿›å†ç¨‹</h2><p>è™½ç„¶iPhone XS Maxç”µæ± å®¹é‡åªæœ‰3174mAhï¼Œè¿œè¿œä½äºå¤§éƒ¨åˆ†Androidçš„æ——èˆ°æœºï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å‘ç°å®ƒçš„ç»­èˆªèƒ½åŠ›ä¼šä¼˜äºå¤§éƒ¨åˆ†çš„Androidæ‰‹æœºã€‚</p><p>ä»”ç»†æƒ³æƒ³è¿™ä¸ªé—®é¢˜å°±ä¼šå‘ç°ï¼ŒAndroidæ˜¯åŸºäºLinuxå†…æ ¸ï¼Œè€ŒLinuxå¤§éƒ¨åˆ†ä½¿ç”¨åœ¨æœåŠ¡å™¨ä¸­ï¼Œå®ƒå¯¹åŠŸè€—å¹¶æ²¡æœ‰åšéå¸¸ä¸¥æ ¼è‹›åˆ»çš„ä¼˜åŒ–ã€‚ç‰¹åˆ«æ˜¯å›½å†…ä¼šæœ‰å„ç§å„æ ·çš„â€œä¿æ´»é»‘ç§‘æŠ€â€ï¼Œå¤§é‡çš„åº”ç”¨åœ¨åå°æ´»åŠ¨ç®€ç›´å°±æ˜¯â€œç”µé‡é»‘æ´â€ã€‚</p><p>é‚£Androidä¸ºäº†ç”µé‡ä¼˜åŒ–éƒ½åšäº†å“ªäº›åŠªåŠ›å‘¢ï¼ŸGoogle I/Oæ¯å¹´éƒ½ä¼šå•ç‹¬è®²è§£è€—ç”µä¼˜åŒ–ï¼Œä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹Androidåœ¨è€—ç”µæ–¹é¢éƒ½åšäº†å“ªäº›æ”¹å˜ã€‚</p><p><strong>1. é‡è›®ç”Ÿé•¿ï¼šPre Android 5.0</strong></p><p>åœ¨Android 5.0ä¹‹å‰ï¼Œç³»ç»Ÿå¹¶ä¸æ˜¯é‚£ä¹ˆå®Œå–„ï¼Œå¯¹äºç”µé‡ä¼˜åŒ–ç›¸å¯¹è¿˜æ˜¯æ¯”è¾ƒå°‘çš„ã€‚ç‰¹åˆ«æ²¡æœ‰å¯¹åº”ç”¨çš„åå°åšä¸¥æ ¼çš„é™åˆ¶ï¼Œå¤šè¿›ç¨‹ã€fork nativeè¿›ç¨‹ä»¥åŠå¹¿æ’­æ‹‰èµ·ç­‰å„ç§ä¿æ´»æµè¡Œäº†èµ·æ¥ã€‚</p><p>ç”¨æˆ·æ‰‹æœºç”¨ç”µå¦‚æµæ°´ï¼Œä¼šæ˜æ˜¾æ„Ÿå—åˆ°ä¸‹é¢å‡ ä¸ªé—®é¢˜ï¼š</p><ul>
<li>
<p><strong>è€—ç”µä¸å®‰è£…åº”ç”¨ç¨‹åºçš„æ•°é‡æœ‰å…³</strong>ã€‚ç”¨æˆ·å®‰è£…è¶Šå¤šçš„åº”ç”¨ç¨‹åºï¼Œæ— è®ºæ˜¯å¦æ‰“å¼€å®ƒä»¬ï¼Œæ‰‹æœºè€—ç”µéƒ½ä¼šæ›´å¿«ã€‚</p>
</li>
<li>
<p><strong>Appè€—ç”µé‡ä¸Appä½¿ç”¨æ—¶é—´æ— å…³</strong>ã€‚ç”¨æˆ·å¸Œæœ›Appçš„è€—ç”µé‡åº”è¯¥ä¸å®ƒçš„ä½¿ç”¨æ—¶é—´ç›¸å…³ï¼Œä½†æ˜¯æœ‰äº›åº”ç”¨å³ä½¿å¸¸å¹´ä¸æ‰“å¼€ï¼Œä¾ç„¶éå¸¸è€—ç”µã€‚</p>
</li>
<li>
<p><strong>ç”µé‡é—®é¢˜æ’æŸ¥å¤æ‚</strong>ã€‚æ— è®ºæ˜¯ç”µé‡çš„æµ‹é‡ï¼Œè¿˜æ˜¯è€—ç”µé—®é¢˜çš„æ’æŸ¥éƒ½å¼‚å¸¸è‰°éš¾ã€‚</p>
</li>
</ul><p>å½“ç„¶åœ¨Android 5.0ä¹‹å‰ï¼Œç³»ç»Ÿä¹Ÿæœ‰å°è¯•åšä¸€äº›çœç”µç›¸å…³çš„ä¼˜åŒ–æªæ–½ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/e5/1b/e5440a10376fee148c96c53a846a6f1b.png" alt=""></p><p><strong>2. é€æ­¥æ”¶ç´§ï¼šAndroid 5.0ï½Android 8.0</strong></p><p>Android 5.0ä¸“é—¨å¼€å¯äº†ä¸€ä¸ª<a href="https://developer.android.com/about/versions/android-5.0?hl=zh-cn">Voltaé¡¹ç›®</a>ï¼Œç›®æ ‡æ˜¯æ”¹å–„ç”µæ± çš„ç»­èˆªã€‚åœ¨ä¼˜åŒ–ç”µé‡çš„åŒæ—¶ï¼Œè¿˜å¢åŠ äº†çš„dumpsys batterystç­‰å·¥å…·ç”Ÿæˆè®¾å¤‡ç”µæ± ä½¿ç”¨æƒ…å†µç»Ÿè®¡æ•°æ®ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/8f/99/8f77b820113df5635497a5ad20a03299.png" alt=""></p><p>ä»Android 6.0å¼€å§‹ï¼ŒGoogleå¼€å§‹ç€æ‰‹æ¸…ç†åå°åº”ç”¨å’Œå¹¿æ’­æ¥è¿›ä¸€æ­¥ä¼˜åŒ–çœç”µã€‚åœ¨è¿™ä¸ªé˜¶æ®µè¿˜å­˜åœ¨ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p><ul>
<li>
<p><strong>çœç”µæ¨¡å¼ä¸å¤Ÿçœç”µ</strong>ã€‚Dozeä½åŠŸè€—æ¨¡å¼é™åˆ¶å¾—ä¸å¤Ÿä¸¥æ ¼ï¼Œä¾‹å¦‚å±å¹•å…³é—­è¿˜å¯ä»¥è·å–ä½ç½®ã€åå°åº”ç”¨çš„ç½‘ç»œæƒé™ç­‰ã€‚</p>
</li>
<li>
<p><strong>ç”¨æˆ·å¯¹åº”ç”¨æ§åˆ¶åŠ›åº¦ä¸å¤Ÿ</strong>ã€‚ç”¨æˆ·ä¸èƒ½ç®€å•çš„å¯¹æŸäº›åº”ç”¨åšæ›´åŠ ç»†è‡´çš„ç”µé‡å’Œåå°è¡Œä¸ºçš„æ§åˆ¶ï¼Œä½†æ˜¯å…¶å®å›½å†…å¾ˆå¤šçš„å‚å•†å·²ç»æå‰å®ç°äº†è¿™ä¸ªåŠŸèƒ½ã€‚</p>
</li>
<li>
<p><strong>Target APIå¼€å‘è€…å“åº”ä¸ç§¯æ</strong>ã€‚ä¸ºäº†ä¸å—æ–°ç‰ˆæœ¬çš„æŸäº›é™åˆ¶ï¼Œå¤§éƒ¨åˆ†å›½å†…çš„åº”ç”¨åšæŒä¸æŠŠTarget APIå‡çº§åˆ°Oreoä»¥ä¸Šï¼Œæ‰€ä»¥å¾ˆå¤šçœç”µçš„åŠŸèƒ½äº‹å®ä¸Šå¹¶æ²¡æœ‰ç”Ÿæ•ˆã€‚</p>
</li>
</ul><p><strong>3. æœ€ä¸¥é™åˆ¶ï¼šAndroid 9.0</strong></p><p>æˆ‘åœ¨Android 9.0åˆšå‡ºæ¥çš„æ—¶å€™ï¼Œæ­£å¸¸ä½¿ç”¨äº†ä¸€å¤©æ‰‹æœºï¼Œåœ¨é€šçŸ¥æ ç«Ÿç„¶å¼¹å‡ºäº†ä¸‹é¢è¿™æ ·ä¸€ä¸ªæç¤ºï¼š<strong>å¾®ä¿¡æ­£åœ¨åå°ä¸¥é‡è€—ç”µ</strong>ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/c6/1b/c6d2c20c09e84190c7b4a64578d0cc1b.png" alt=""></p><p>å°½ç®¡ç»è¿‡å‡ ä¸ªç‰ˆæœ¬çš„ä¼˜åŒ–ï¼ŒAndroidçš„ç»­èˆªé—®é¢˜ä¾ç„¶æ²¡æœ‰æ ¹æœ¬æ€§çš„æ”¹å–„ã€‚ä½†ä½ å¯ä»¥çœ‹åˆ°çš„æ˜¯ï¼Œä»Android 9.0å¼€å§‹ï¼ŒGoogleå¯¹<a href="https://developer.android.com/about/versions/pie/power?hl=zh-cn">ç”µæºç®¡ç†</a>å¼•å…¥äº†å‡ ä¸ªæ›´åŠ ä¸¥æ ¼çš„é™åˆ¶ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/13/8e/13697353748c1637643a6970db22808e.png" alt=""></p><p>é€šè¿‡åº”ç”¨å¾…æœºåˆ†ç»„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿åº”ç”¨ä½¿ç”¨çš„ç”µé‡å’Œå®ƒä»¬çš„ä½¿ç”¨æ—¶é—´æˆæ­£æ¯”ï¼Œè€Œä¸æ˜¯å’Œæ‰‹æœºä¸Šå®‰è£…çš„åº”ç”¨æ•°é‡æˆæ­£æ¯”ã€‚å¯¹äºä¸å¸¸ç”¨çš„åº”ç”¨ï¼Œå®ƒä»¬å¯ä»¥â€œä½œæ¶â€çš„å¯èƒ½æ€§æ›´å°äº†ã€‚é€šè¿‡çœç”µæ¨¡å¼å’Œåº”ç”¨åå°é™åˆ¶ï¼Œç”¨æˆ·å¯ä»¥çŸ¥é“å“ªäº›åº”ç”¨æ˜¯è€—ç”µçš„åº”ç”¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹å®ƒä»¬åšæ›´åŠ ä¸¥æ ¼çš„é™åˆ¶ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œæ— è®ºæ˜¯Google Playè¿˜æ˜¯å›½å†…çš„Androidç»¿è‰²è”ç›Ÿï¼Œéƒ½è¦æ±‚åº”ç”¨åœ¨ä¸€å¹´å†…æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬çš„Target APIã€‚ç”µæ± ç»­èˆªå§‹ç»ˆæ˜¯Androidçš„ç”Ÿå‘½çº¿ï¼Œæˆ‘ç›¸ä¿¡ä»Šå¹´çš„Android Qä¹Ÿä¼šæ¨å‡ºæ›´å¤šçš„ä¼˜åŒ–æªæ–½ã€‚</p><h2>æ€»ç»“</h2><p>ä»Šå¤©æˆ‘è®²äº†åº”ç”¨ç¨‹åºã€Androidç³»ç»Ÿã€æ‰‹æœºç¡¬ä»¶ä¸ç”µæ± ä¹‹é—´çš„å…³ç³»ï¼Œä¹Ÿå›é¡¾äº†Androidè€—ç”µä¼˜åŒ–çš„æ¼”è¿›å†ç¨‹ã€‚é‚£è½å®åˆ°å…·ä½“å·¥ä½œæ—¶ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•å»åšè€—ç”µä¼˜åŒ–å‘¢ï¼Ÿä¸‹ä¸€æœŸæˆ‘ä»¬æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>åœ¨è®²å†…å­˜ã€CPUã€å­˜å‚¨å’Œç½‘ç»œè¿™äº›çŸ¥è¯†çš„æ—¶å€™ï¼Œæˆ‘éƒ½ä¼šè®²ä¸€äº›ç¡¬ä»¶ç›¸å…³çš„çŸ¥è¯†ã€‚ä¸»è¦æ˜¯å¸Œæœ›å¸®ä½ å»ºç«‹ä¸€å¥—ä»åº”ç”¨å±‚åˆ°æ“ä½œç³»ç»Ÿï¼Œå†åˆ°ç¡¬ä»¶çš„æ•´ä½“è®¤çŸ¥ã€‚å½“ä½ çš„è„‘æµ·é‡Œé¢æœ‰ä¸€å¥—å®Œæ•´çš„çŸ¥è¯†å›¾è°±æ—¶ï¼Œæ‰èƒ½æ›´å¾—å¿ƒåº”æ‰‹åœ°è§£å†³ä¸€äº›ç–‘éš¾é—®é¢˜ï¼Œè¿›è€Œå¯ä»¥åšå¥½å¯¹åº”çš„æ€§èƒ½ä¼˜åŒ–å·¥ä½œã€‚</p><h2>è¯¾åä½œä¸š</h2><p><span class="orange">ä»Šå¤©çš„è¯¾åä½œä¸šæ˜¯ï¼Œåœ¨æ—¥å¸¸çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä½ é‡åˆ°è¿‡å“ªäº›è€—ç”µé—®é¢˜ï¼Ÿé‡åˆ°è¿™äº›é—®é¢˜çš„æ—¶å€™ï¼Œä½ ä¸€èˆ¬é€šè¿‡å“ªäº›æ‰‹æ®µå»å®šä½å’Œä¿®å¤å‘¢ï¼Ÿ</span>æ¬¢è¿ç•™è¨€è·Ÿæˆ‘å’Œå…¶ä»–åŒå­¦ä¸€èµ·è®¨è®ºã€‚</p><p>æ¬¢è¿ä½ ç‚¹å‡»â€œè¯·æœ‹å‹è¯»â€ï¼ŒæŠŠä»Šå¤©çš„å†…å®¹åˆ†äº«ç»™å¥½å‹ï¼Œé‚€è¯·ä»–ä¸€èµ·å­¦ä¹ ã€‚æœ€ååˆ«å¿˜äº†åœ¨è¯„è®ºåŒºæäº¤ä»Šå¤©çš„ä½œä¸šï¼Œæˆ‘ä¹Ÿä¸ºè®¤çœŸå®Œæˆä½œä¸šçš„åŒå­¦å‡†å¤‡äº†ä¸°åšçš„â€œå­¦ä¹ åŠ æ²¹ç¤¼åŒ…â€ï¼ŒæœŸå¾…ä¸ä½ ä¸€èµ·åˆ‡ç£‹è¿›æ­¥å“¦ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/bf/f1/bf8fdc35ddccb10b1161d8ca7eb8f8f1.jpg" alt=""></p>
                    </div>
                </div>

            </div>
            <div data-v-87ffcada="" class="article-comments pd"><h2 data-v-87ffcada=""><span
                    data-v-87ffcada="">ç²¾é€‰ç•™è¨€</span></h2>
                <ul data-v-87ffcada="">
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/37/a9/47a4622a.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">äº®ä»”</span>
                            </div>
                            <div class="bd">æœ¬ç¯‡æ–‡ç« ä¸»è¦å†™çš„æ˜¯ç³»ç»Ÿæ–¹é¢å¦‚ä½•ç®¡æ§åº”ç”¨å·²è¾¾åˆ°çœç”µçš„æ•ˆæœï¼Œå¯¹äºæˆ‘ä»¬æ—¥å¸¸åº”ç”¨å¼€å‘è§’åº¦æ¥è¯´éœ€è¦æ³¨æ„å“ªäº›ç‚¹å·²è¾¾åˆ°æˆ‘ä»¬è‡ªå·±çš„åº”ç”¨æ›´çœç”µã€‚ <br></div>
                            <span class="time">2019-01-29 10:35</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/6e/ab/6466ccac.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">æ±ªæ—­å…‰</span>
                            </div>
                            <div class="bd">ä¸€å¼€å§‹é‚£ä¸ªç¬‘è¯ä¸åº”è¯¥è¯´çš„æ˜¯iphoneå—ï¼Ÿç”µæ± å®¹é‡å¤ªå°ï¼ŒğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ <br></div>
                            <span class="time">2019-01-29 08:46</span>
                            
                        </div>
                    </li>
                    
                    <li data-v-87ffcada="" class="comment-item"><img
                            src="https://static001.geekbang.org/account/avatar/00/12/04/c8/68263086.jpg" class="avatar">
                        <div class="info">
                            <div class="hd"><span class="username">å“ˆç€æœ‹å‹</span>
                            </div>
                            <div class="bd">å›½å†…è½¯ä»¶éƒ½åœ¨è¿½æ±‚æ°¸é©»åå°ç­‰ç­‰é»‘ç§‘æŠ€ï¼Œæé«˜ä»ä¸šè€…ç´ è´¨å°±èƒ½æå¤§æé«˜Androidæ‰‹æœºçš„ç»­èˆªèƒ½åŠ› <br></div>
                            <span class="time">2019-01-29 17:33</span>
                            
                        </div>
                    </li>
                    


                </ul>
            </div>
        </div>
    </div>
</div>
</body>
</html>